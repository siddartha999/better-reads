(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},229:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(53),c=a.n(n),i=(a(193),a(6)),o=a(15),l=(a(194),Object(r.createContext)(null)),d=(a(195),Object(r.createContext)(null)),u=(a(196),a(0)),j=function(e){var t=new Date(e.targetDate||"Dec 22, 2021 00:00:00").getTime(),a=Object(r.useState)(""),s=Object(i.a)(a,2),n=s[0],c=s[1],o=setInterval((function(){var e=(new Date).getTime(),a=t-e,r=Math.floor(a/864e5),s=Math.floor(a%864e5/36e5),n=Math.floor(a%36e5/6e4),i=Math.floor(a%6e4/1e3);c(r+"d "+s+"h "+n+"m "+i+"s "),a<0&&(clearInterval(o),c("The latest features are on their way!"))}),1e3);return Object(u.jsx)("div",{className:"CountdownClock",children:n})},b=function(){Object(r.useContext)(l).user,Object(o.f)();var e=Object(r.useContext)(d);return Object(u.jsx)("div",{className:"Home",children:Object(u.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(u.jsx)("p",{children:"Home tab feature development is in progress. Keep an eye out"}),Object(u.jsx)(j,{targetDate:"Dec 22, 2021 00:00:00"})]})})},p=a(18),h=a.n(p),O=a(25),m=(a(199),a(351)),v=a(350),x=a(321),g=a(342),f=a(347),k=a(349),w=a(335),N=a(319),C=a(320),y=a(153),D=a.n(y),S=a(348),B=a(149),A=a.n(B),R=a(150),M=a.n(R),T=a(152),E=a.n(T),U=a(151),I=a.n(U),Y=a(148),P=a.n(Y),_=a(30),F=a(163),L=a(38),G=a(318),W=a(146),z=a.n(W),H=(a(200),a(144)),q=a.n(H),J=a(346),K=function(e){var t=e.setClassName||"",a=e.setPlaceHolder||"Better Reads search...",s=Object(r.useState)(null),n=Object(i.a)(s,2),c=n[0],o=n[1],l=function(t){t.preventDefault(),e.searchSubmit({inputValue:c})};return Object(u.jsx)("div",{className:"SearchBar",children:Object(u.jsxs)(F.a,{className:t,component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:400},children:[Object(u.jsx)(L.c,{sx:{ml:1,flex:1},placeholder:a,inputProps:{"aria-label":"search google maps"},onSubmit:l,value:c,onChange:function(e){o(e.target.value)}}),e.displayLoadingSpinner?Object(u.jsx)("div",{className:"SearchBar-loading-spinner-wrapper",children:Object(u.jsx)(J.a,{})}):Object(u.jsxs)(u.Fragment,{children:[c&&c.length>0?Object(u.jsx)(q.a,{className:"Searchbar-clear",onClick:function(e){o("")}}):null,Object(u.jsx)(G.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(u.jsx)(f.a,{type:"submit",sx:{p:"10px"},"aria-label":"search",onClick:l,children:Object(u.jsx)(z.a,{})})]})]})})},V=Object(r.createContext)(null),Z=a(21),Q=a.n(Z),X=240,$=function(e){var t=e.window,a=s.a.useState(!1),n=Object(i.a)(a,2),c=n[0],j=n[1],b=Object(r.useContext)(l).user,p=b.profile.profilePicUrl,y=b&&b.profile&&b.profile.name?b.profile.name:"",B=y.split(" "),R=Object(r.useState)(!1),T=Object(i.a)(R,2),U=T[0],Y=T[1],F=B[0][0];B.length>1&&(F+=B.pop()[0]);var L=Object(r.useContext)(V).raiseSnackbarMessage,G=Object(o.f)(),W=Object(r.useContext)(d),z=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.inputValue,Y(!0),e.next=4,Q()({method:"GET",url:"https://openlibrary.org/search.json?q="+encodeURI(a)+"&limit=10"});case 4:r=e.sent,Y(!1),200!==r.status||0===r.data.numFound?L("Unable to fetch the Search result. Please try again later or try a different search","error"):G("bookresults?q=".concat(a),{state:r.data});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){j(!c)},q=Object(u.jsxs)("div",{children:[Object(u.jsx)(S.a,{}),Object(u.jsxs)(k.a,{children:[Object(u.jsx)(_.b,{to:"/",className:"NavSideBar-item",children:Object(u.jsxs)(w.a,{button:!0,onClick:H,children:[Object(u.jsx)(N.a,{children:Object(u.jsx)(P.a,{})}),Object(u.jsx)(C.a,{primary:"Home"})]},"Home")}),Object(u.jsx)(_.b,{to:"/profile",className:"NavSideBar-item",onClick:H,children:Object(u.jsxs)(w.a,{button:!0,children:[Object(u.jsx)(N.a,{children:Object(u.jsx)(A.a,{})}),Object(u.jsx)(C.a,{primary:"Profile"})]},"Profile")}),Object(u.jsx)(_.b,{to:"/mybooks",className:"NavSideBar-item",onClick:H,children:Object(u.jsxs)(w.a,{button:!0,children:[Object(u.jsx)(N.a,{children:Object(u.jsx)(M.a,{})}),Object(u.jsx)(C.a,{primary:"My Books"})]},"My Books")}),Object(u.jsx)(_.b,{to:"/friends",className:"NavSideBar-item",onClick:H,children:Object(u.jsxs)(w.a,{button:!0,children:[Object(u.jsx)(N.a,{children:Object(u.jsx)(I.a,{})}),Object(u.jsx)(C.a,{primary:"Friends"})]},"Friends")}),Object(u.jsx)(_.b,{to:"/communities",className:"NavSideBar-item",onClick:H,children:Object(u.jsxs)(w.a,{button:!0,children:[Object(u.jsx)(N.a,{children:Object(u.jsx)(E.a,{})}),Object(u.jsx)(C.a,{primary:"Communities"})]},"Communities")})]})]}),J=void 0!==t?function(){return t().document.body}:void 0;return Object(u.jsxs)(v.a,{sx:{display:"flex"},className:"NavSideBar",children:[Object(u.jsx)(x.a,{}),Object(u.jsx)(m.a,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(X,"px)")},ml:{sm:"".concat(X,"px")}},children:Object(u.jsxs)(S.a,{children:[Object(u.jsx)(f.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:H,sx:{mr:2,display:{sm:"none"}},children:Object(u.jsx)(D.a,{})}),Object(u.jsxs)("div",{className:"NavSideBar-user-profile-wrapper",children:[Object(u.jsx)("div",{className:"NavSideBar-Search-wrapper",children:Object(u.jsx)(K,{setPlaceHolder:"Search Books/Authors",searchSubmit:z,displayLoadingSpinner:U})}),Object(u.jsxs)("div",{className:"NavSideBar-user-profile-info-wrapper",title:y,onClick:function(){G("/profile")},children:[Object(u.jsx)("div",{className:"NavSideBar-user-profile-pic-wrapper",children:Object(u.jsx)("img",{src:p,className:"NavSideBar-user-profile-pic"})}),Object(u.jsx)("div",{className:"NavSideBar-user-profile-name-wrapper ".concat(W<700?"no-display":null),children:Object(u.jsx)("p",{className:"NavSideBar-user-profile-name",children:F})})]})]})]})}),Object(u.jsxs)(v.a,{component:"nav",sx:{width:{sm:X},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[Object(u.jsx)(g.a,{container:J,variant:"temporary",open:c,onClose:H,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:X}},children:q}),Object(u.jsx)(g.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:X}},open:!0,children:q})]}),Object(u.jsx)(v.a,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(X,"px)")}}})]})},ee=(a(225),a(154));var te=function(){var e=Object(r.useContext)(l),t=(e.user,e.setUser);return Object(u.jsx)("div",{className:"Login",children:Object(u.jsxs)("div",{className:"Login-wrapper",children:[Object(u.jsxs)("div",{className:"Login-header",children:[Object(u.jsx)("div",{className:"Login-header-title-wrapper",children:Object(u.jsx)("p",{className:"Login-header-title",children:"Better Reads"})}),Object(u.jsx)("p",{className:"Login-header-caption",children:"A social network for Bookworms!"})]}),Object(u.jsxs)("div",{className:"Login-types-wrapper",children:[Object(u.jsx)("div",{className:"Login-types-text-wrapper",children:Object(u.jsx)("p",{children:"Discover & read more"})}),Object(u.jsx)("div",{className:"Login-google",children:Object(u.jsx)(ee.GoogleLogin,{clientId:"254569771516-88bbgoqoik1ok2iq0gbvmi4dsrg27sis.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:function(e){Q()({method:"POST",url:"https://sid-better-reads.herokuapp.com/api/login/googlelogin",data:{tokenId:e.tokenId}}).then((function(e){if(400===e.status)alert(e.data.error);else{var a={token:e.data.token,profile:e.data.user};localStorage.setItem("betterreadsuserinfo",JSON.stringify(a)),t(a)}}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"})})]})]})})},ae=(a(226),a(343)),re=function(e){var t=e;if(e>=1e3){e=Math.round(e);for(var a=Math.floor((""+e).length/3),r="",s=2;s>=1;s--){if(((r=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}r%1!=0&&(r=r.toFixed(1)),t=r+["","k","m","b","t"][a]}return t},se=(a(227),a(48)),ne=a.n(se),ce=a(333),ie=a(336),oe=function(e){var t=e.data,a=Object(r.useContext)(d),s=Math.ceil((t&&t.length?t.length:0)/10),n=Object(r.useState)(1),c=Object(i.a)(n,2),l=c[0],j=c[1],b=Object(o.f)(),p=function(e){var t=e.currentTarget.getAttribute("bookid");b("/book/".concat(t),{state:t})};return Object(u.jsxs)(u.Fragment,{children:[t&&t.length?t.slice(10*(l-1),10*l).map((function(e,t){return Object(u.jsxs)("div",{className:"UserActions-action ".concat(a<1200?"mobile1200":null),children:[Object(u.jsxs)("div",{className:"UserActions-book-cover-wrapper",children:[Object(u.jsx)("img",{src:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":"/ImgNotAvailable.jpg",onClick:p,bookid:e.bookId}),Object(u.jsx)("div",{className:"UserActions-book-timestamp-wrapper",children:Object(u.jsx)("p",{children:ne()(e.timestamp).format("Do MMM, YY")})})]}),Object(u.jsxs)("div",{className:"UserActions-details-wrapper",children:[Object(u.jsx)("div",{className:"UserActions-action-wrapper",children:Object(u.jsx)("p",{children:e.action})}),Object(u.jsxs)("div",{className:"UserActions-book-name-wrapper",children:[Object(u.jsx)("span",{className:"UserActions-book-name",children:e.bookName}),e.rating?Object(u.jsx)("span",{children:Object(u.jsx)(ie.a,{value:e.rating,precision:.5,readOnly:!0})}):null]}),e.reviewContent?Object(u.jsx)("div",{className:"UserActions-book-review-content-wrapper",children:Object(u.jsx)("p",{children:e.reviewContent})}):null]})]},t)})):null,t&&t.length?Object(u.jsx)("div",{className:"UserActions-pagination-wrapper",children:Object(u.jsx)(ce.a,{count:s,page:l,onChange:function(e,t){j(t)},variant:"outlined",color:"primary"})}):null]})},le=(a(229),a(230),a(87)),de=a(325),ue=a(326),je=a(339),be=function(e){var t=e.data,a=Object(r.useState)(!0),s=Object(i.a)(a,2),n=s[0],c=s[1],o=[],l=[];for(var d in t)o.push(d),l.push(t[d]);var j={labels:o,datasets:[{data:l,backgroundColor:["#292826","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(255, 99, 132)","#AA96DA"]}]};return Object(u.jsx)("div",{className:"UserRatingsChart",children:Object(u.jsxs)(de.a,{onClose:function(){e.setOpenReviewChart(!1)},open:e.open,children:[Object(u.jsx)(ue.a,{children:"Rating distribution"}),Object(u.jsx)(je.a,{checked:n,onChange:function(e){c(e.target.checked)},inputProps:{"aria-label":"controlled"}}),n?Object(u.jsx)(le.a,{data:j,height:200,width:200,options:{scales:{x:{grid:{display:!1}},y:{display:!1}},plugins:{legend:{display:!1}}}}):Object(u.jsx)(le.c,{data:j,height:200,width:200,options:{plugins:{legend:{display:!1}}}})]})})},pe=function(){var e=Object(r.useContext)(l),t=e.user,a=e.setUser,s=Object(r.useContext)(d),n=t.profile.name,c=t.profile.profilePicUrl,j=Object(r.useState)(null),b=Object(i.a)(j,2),p=b[0],m=b[1],v=Object(r.useState)(null),x=Object(i.a)(v,2),g=x[0],f=x[1],k=Object(r.useContext)(V).raiseSnackbarMessage,w=Object(r.useState)(null),N=Object(i.a)(w,2),C=N[0],y=N[1],D=Object(r.useState)(!1),S=Object(i.a)(D,2),B=S[0],A=S[1],R=Object(o.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,s,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(k("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/userActivity",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(s=e.sent).status&&(k(s.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===s.status){e.next=9;break}return k(s.data.message,"error"),e.abrupt("return");case 9:if(n=0,s.data&&s.data.ratingMap&&s.data.ratingCount){for(c in 0,s.data.ratingMap)n+=c*s.data.ratingMap[c]/s.data.ratingCount;n=n.toFixed(2)}m({ratingCount:s.data.ratingCount,averageRating:n,ratingMap:s.data.ratingMap}),f(s.data.reviews);case 13:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(k("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/userActions",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(s=e.sent).status&&(k(s.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===s.status){e.next=9;break}return k(s.data.message,"error"),e.abrupt("return");case 9:y(s.data);case 10:case"end":return e.stop()}}),e)}))),[]);return Object(u.jsxs)("div",{className:"Profile  ".concat(s<1400?"mobile":""),children:[Object(u.jsxs)("div",{className:"Profile-details-wrapper",children:[Object(u.jsx)("div",{className:"Profile-image-wrapper",children:Object(u.jsx)("img",{src:c,className:"Profile-user-pic"})}),Object(u.jsxs)("div",{className:"Profile-info-wrapper",children:[Object(u.jsx)("p",{className:"Profile-name",title:n,children:n}),p?Object(u.jsxs)("div",{className:"Profile-rating-wrapper",children:[p.ratingCount?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("span",{className:"Profile-rating-count",onClick:function(e){R("/mybooks/rated",{state:"rated"})},children:[re(p.ratingCount)," ",p.ratingCount>1?"ratings":"rating"]})}):null,p.averageRating>0?Object(u.jsxs)("span",{className:"Profile-average-rating",onClick:function(){A(!0)},children:["(",p.averageRating," average)"]}):null]}):null,g&&g.length?Object(u.jsx)("div",{className:"Profile-review-wrapper",children:Object(u.jsxs)("span",{className:"Profile-review-count",onClick:function(){R("/myReviews",{state:{reviews:g}})},children:[g.length," ",g.length>1?"reviews":"review"]})}):null,Object(u.jsx)(ae.a,{className:"Profile-sign-out",variant:"outlined",color:"error",onClick:function(){localStorage.setItem("betterreadsuserinfo",null),a(null)},children:"Sign Out"}),Object(u.jsx)(be,{data:null===p||void 0===p?void 0:p.ratingMap,open:B,setOpenReviewChart:A})]})]}),Object(u.jsx)("div",{className:"Profile-user-actions-wrapper",children:Object(u.jsx)(oe,{data:null===C||void 0===C?void 0:C.userActions})})]})},he=a(35),Oe=a(327),me=a(337),ve=a(334),xe=s.a.forwardRef((function(e,t){return Object(u.jsx)(ve.a,Object(he.a)({elevation:6,ref:t,variant:"filled"},e))})),ge=function(e){var t,a,s=Object(r.useContext)(V),n=s.snackbarOpen,c=s.toggleSnackbar,i=s.snackbarObj,o=function(e,t){"clickaway"!==t&&c(!1)};return Object(u.jsx)(Oe.a,{spacing:2,sx:{width:"100%"},children:Object(u.jsx)(me.a,{open:n,autoHideDuration:2e3,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(u.jsx)(xe,{onClose:o,severity:null===i||void 0===i||null===(t=i.current)||void 0===t?void 0:t.severity,sx:{width:"100%"},children:null===i||void 0===i||null===(a=i.current)||void 0===a?void 0:a.message})},"bottom + center")})},fe=(a(231),a(352)),ke=a(354),we=a(94),Ne=a(353),Ce="/ImgNotAvailable.jpg",ye=function(e){var t,a,s,n=Object(o.e)(),c=Object(r.useState)((null===(t=n.state)||void 0===t?void 0:t.docs)||[]),l=Object(i.a)(c,2),j=l[0],b=l[1],p=Math.ceil(((null===(a=n.state)||void 0===a?void 0:a.numFound)||(null===(s=n.state)||void 0===s?void 0:s.num_found))/10),m=Object(r.useState)(1),v=Object(i.a)(m,2),x=v[0],g=v[1],f=Object(r.useContext)(d),k=Object(r.useContext)(V).raiseSnackbarMessage,w=Object(o.f)(),N=Object(r.useState)(!1),C=Object(i.a)(N,2),y=C[0],D=C[1],S=function(){var e=Object(O.a)(h.a.mark((function e(t,a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(a),D(!0),e.next=4,Q()({method:"GET",url:"https://openlibrary.org/search.json"+n.search+"&limit=10&offset=".concat(a)});case 4:r=e.sent,D(!1),200!==r.status||0===r.data.numFound?k("Unable to fetch the Search result. Please try again later or try a different search","error"):b(r.data.docs);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(e){var t=e.currentTarget.getAttribute("itemid").split("/");t=t.pop(),w("/book/".concat(t),{state:t})};Object(r.useEffect)((function(){var e;g(1),b((null===(e=n.state)||void 0===e?void 0:e.docs)||[])}),n.key);var A=Object(u.jsx)("div",{className:"BookResults-no-results",children:Object(u.jsx)("p",{children:"No results to display. Please try a different Search"})}),R=Object(u.jsxs)("div",{className:"BookResults-wrapper",children:[j&&j.length?j.map((function(e){return Object(u.jsx)("div",{coverid:e.cover_i,itemID:e.key,className:"BookResults-result-card ".concat(f<800?"mobile":f<1e3?"tablet":""),children:Object(u.jsxs)(fe.a,{sx:{maxWidth:345},itemID:e.key,onClick:B,children:[Object(u.jsx)(Ne.a,{component:"img",alt:Ce,image:e.cover_i?"https://covers.openlibrary.org/b/id/"+e.cover_i+"-M.jpg":Ce}),Object(u.jsx)("div",{className:"BookResults-result-card-details-wrapper",children:Object(u.jsxs)(ke.a,{children:[Object(u.jsx)(we.a,{gutterBottom:!0,variant:"h6",component:"div",title:e.title,children:e.title}),Object(u.jsxs)(we.a,{variant:"body2",color:"text.secondary",children:["Initial Published Year: ",e.first_publish_year]})]})})]})},e.key)})):null,y?Object(u.jsx)("div",{className:"BookResults-loading-spinner-wrapper",children:Object(u.jsx)(J.a,{})}):null]});return Object(u.jsxs)("div",{className:"BookResults",children:[j?R:A,j?Object(u.jsx)("div",{className:"BookResults-pagination-wrapper",children:Object(u.jsx)(ce.a,{count:p,page:x,onChange:S,variant:"outlined",color:"primary"})}):null]})},De=(a(232),a(344)),Se=(a(233),"/ImgNotAvailable.jpg"),Be=function(e){var t=e.id,a=e.limit||50,s=Object(r.useState)(null),n=Object(i.a)(s,2),c=n[0],l=n[1],d=Object(r.useContext)(V).raiseSnackbarMessage,j=Object(o.f)(),b=function(e){var t=e.currentTarget.getAttribute("bookid").split("/").pop();console.log("before nav",t),j("/book/".concat(t),{state:t})};Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()({method:"GET",url:"https://openlibrary.org"+t+"/works.json?limit="+a});case 2:if((r=e.sent)&&r.data&&200===r.status){e.next=6;break}return d("Unable to retrieve the works of Author","error"),e.abrupt("return");case 6:l(r.data.entries);case 7:case"end":return e.stop()}}),e)}))),[e.id]);var p=Object(u.jsx)("div",{className:"AuthorWorks-no-results",children:Object(u.jsx)("p",{children:"No Author works to display."})});return Object(u.jsx)("div",{className:"AuthorWorks",children:c?Object(u.jsx)(u.Fragment,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(u.jsxs)("div",{className:"AuthorWorks-work-wrapper",children:[Object(u.jsx)("div",{className:"AuthorWorks-work-cover-wrapper",bookid:e.key,onClick:b,children:Object(u.jsx)("img",{alt:Se,src:e&&e.covers&&e.covers.length?"https://covers.openlibrary.org/b/id/"+e.covers[0]+"-M.jpg":Se})}),Object(u.jsx)("div",{className:"Authorworks-work-title-wrapper",title:e.title,children:Object(u.jsx)("p",{children:e.title})})]},e.key)}))}):p})},Ae=(a(234),a(340)),Re=a(356),Me=a(355),Te=a(332),Ee={WANT_TO_READ:"Want to Read",CURRENTLY_READING:"Currently Reading",READ:"Read",NONE:"None"},Ue=[Ee.CURRENTLY_READING,Ee.WANT_TO_READ,Ee.READ],Ie=Ee,Ye=a(105),Pe=(a(235),a(4)),_e=a(357),Fe=a(358),Le=a(156),Ge=a.n(Le),We=a(155),ze=a.n(We),He=a(341),qe=a(331),Je=a(329),Ke=a(330),Ve=Object(r.createContext)(null),Ze=["children","onClose"],Qe=(Object(Pe.a)(de.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),function(e){var t=e.children,a=e.onClose,r=Object(Ye.a)(e,Ze);return Object(u.jsxs)(ue.a,Object(he.a)(Object(he.a)({sx:{m:0,p:2}},r),{},{children:[t,a?Object(u.jsx)(f.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(u.jsx)(Ge.a,{})}):null]}))}),Xe=function(e){return Object(u.jsx)(ze.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(u.jsx)(F.a,Object(he.a)({},e))})},$e=function(e){var t=Object(r.useState)(null),a=Object(i.a)(t,2),s=a[0],n=a[1],c=Object(r.useState)(null),o=Object(i.a)(c,2),j=o[0],b=o[1],p=Object(r.useState)(null),m=Object(i.a)(p,2),v=m[0],x=m[1],g=Object(r.useContext)(l),f=g.user,k=g.setUser,w=Object(r.useContext)(V).raiseSnackbarMessage,N=Object(r.useRef)(!1),C=Object(r.useContext)(d),y=Object(r.useState)(""),D=Object(i.a)(y,2),S=D[0],B=D[1],A=Object(r.useRef)(e.reviewContent),R=Object(r.useContext)(Ve),M=R.setCurrentUserReview,T=R.bookId,E=function(){e.setDialogOpen(!1)};Object(r.useEffect)((function(){n(e.startDate||null),b(e.endDate||null),x(e.targetDate||null),B(e.reviewContent),console.log("In UseEffect",T,e.reviewContent)}),[e.startDate,e.endDate,e.setTargetDate,e.reviewContent,T]);var U=function(){var t=Object(O.a)(h.a.mark((function t(){var a,r,n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),(n=null===f||void 0===f?void 0:f.token)||(w("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),k(null)),t.next=5,Q()({method:"PATCH",url:"https://sid-better-reads.herokuapp.com"+"/api/book/".concat(T),headers:{Authorization:"Bearer ".concat(n)},data:{extras:{userName:null===(a=f.profile)||void 0===a?void 0:a.name,profilePicUrl:null===(r=f.profile)||void 0===r?void 0:r.profilePicUrl,rating:e.rating,startDate:s,endDate:j,targetDate:v,status:e.status,prevReview:A.current,reviewContent:S},cover:e.bookCover,name:e.bookName}});case 5:if(401===(c=t.sent).status&&(w(c.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),k(null)),200===c.status){t.next=10;break}return w(c.data.message,"error"),t.abrupt("return");case 10:A.current!==S&&M({reviewContent:S,reviewTimeStamp:Date.now()}),A.current=S;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"UserBookExtrasDialog",children:Object(u.jsxs)(de.a,{onClose:E,"aria-labelledby":"draggable-dialog-title",open:e.setOpen,PaperComponent:Xe,children:[Object(u.jsx)(Qe,{id:"customized-dialog-title",onClose:E,style:{cursor:"move"},children:Object(u.jsx)("p",{className:"UserBookExtrasDialog-title",children:e.bookName})}),Object(u.jsx)(_e.a,{dividers:!0,children:Object(u.jsxs)("div",{className:"UserBookExtrasDialog-content-wrapper",children:[Object(u.jsxs)("div",{className:"UserBookExtrasDialog-content-dates-wrapper ".concat(C<600?"mobile600":null),children:[e.status&&(e.status===Ie.CURRENTLY_READING||e.status===Ie.READ)&&Object(u.jsx)("div",{className:"UserBookExtrasDialog-start-date-wrapper",children:Object(u.jsx)(Je.b,{dateAdapter:qe.a,children:Object(u.jsx)(Ke.a,{label:"Start Date",value:s,onChange:function(t){if(e.status===Ie.READ&&j){var a=Date.parse(ne()(t).format("YYYY-MM-DD")+"T00:00:00"),r=Date.parse(ne()(j).format("YYYY-MM-DD")+"T00:00:00");console.log(a,r),N.current=a>r}else N.current=!1;n(t)},maxDate:new Date,renderInput:function(e){return Object(u.jsx)(He.a,Object(he.a)({},e))}})})}),e.status&&e.status===Ie.READ&&Object(u.jsx)("div",{className:"UserBookExtrasDialog-end-date-wrapper ".concat(!0===N.current?"error":null),children:Object(u.jsx)(Je.b,{dateAdapter:qe.a,children:Object(u.jsx)(Ke.a,{label:"End Date",value:j,onChange:function(t){if(e.status===Ie.READ&&s){var a=Date.parse(ne()(s).format("YYYY-MM-DD")+"T00:00:00"),r=Date.parse(ne()(t).format("YYYY-MM-DD")+"T00:00:00");console.log(a,r),N.current=a>r}else N.current=!1;b(t)},maxDate:new Date,renderInput:function(e){return Object(u.jsx)(He.a,Object(he.a)({},e))}})})}),e.status&&e.status===Ie.WANT_TO_READ&&Object(u.jsx)("div",{className:"UserBookExtrasDialog-end-date-wrapper",children:Object(u.jsx)(Je.b,{dateAdapter:qe.a,children:Object(u.jsx)(Ke.a,{label:"Target Date",value:v,onChange:function(e){x(e)},minDate:new Date,renderInput:function(e){return Object(u.jsx)(He.a,Object(he.a)({},e))}})})})]}),Object(u.jsxs)("div",{className:"UserBookExtrasDialog-review-wrapper",children:[Object(u.jsx)(He.a,{value:S,multiline:!0,inputProps:{maxLength:280},fullWidth:!0,label:"review",id:"fullWidth",onChange:function(e){B(e.target.value)}}),Object(u.jsxs)("div",{className:"UserBookExtrasDialog-review-utils-wrapper",children:[null!==S&&void 0!==S?Object(u.jsx)("div",{className:"UserBookExtrasDialog-review-progress-wrapper",title:"".concat(S.length," / 280"),children:Object(u.jsx)(J.a,{variant:"determinate",color:"secondary",value:(100*S.length/280).toFixed(2)})}):null,e.reviewTimeStamp&&Object(u.jsx)("div",{className:"UserBookExtrasDialog-timestamp-wrapper",children:Object(u.jsxs)("p",{children:["last updated: ",ne()(e.reviewTimeStamp).format("D MMM YYYY")]})})]})]})]})}),Object(u.jsx)(Fe.a,{children:Object(u.jsx)(ae.a,{autoFocus:!0,onClick:U,disabled:N.current,children:"Save changes"})})]})})},et=[Ie.NONE,Ie.WANT_TO_READ,Ie.CURRENTLY_READING,Ie.READ],tt=function(e){var t=Object(r.useState)(""),a=Object(i.a)(t,2),s=a[0],n=a[1],c=Object(r.useContext)(l),o=c.user,d=c.setUser,j=Object(r.useContext)(V).raiseSnackbarMessage,b=Object(r.useRef)(0),p=Object(r.useState)(!1),m=Object(i.a)(p,2),v=m[0],x=m[1],g=function(){var t=Object(O.a)(h.a.mark((function t(a){var r,c,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s,c=a.target.value,n(c),e.updateStatus&&e.updateStatus(c),b.current+=1,(i=null===o||void 0===o?void 0:o.token)||(j("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),d(null)),t.next=9,Q()({method:"PATCH",url:"https://sid-better-reads.herokuapp.com"+"/api/book/".concat(e.bookId),headers:{Authorization:"Bearer ".concat(i)},data:{status:{current:c,prev:r},cover:e.cover,name:e.name,startDate:e.startDate,endDate:e.endDate,targetDate:e.targetDate}});case 9:401===(l=t.sent).status&&(j(l.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),d(null));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(e.status?e.status:et[0])}),[e.status]),Object(u.jsxs)("div",{className:"UserBookStatus",children:[Object(u.jsxs)(Me.a,{variant:"standard",sx:{m:1,minWidth:120},children:[Object(u.jsx)(Ae.a,{id:"demo-simple-select-standard-label",children:"Status"}),Object(u.jsx)(Te.a,{labelId:"demo-simple-select-standard-label",inputProps:{MenuProps:{disableScrollLock:!0}},id:"demo-simple-select-standard",value:s,onChange:g,label:"Status",children:et.map((function(e,t){return Object(u.jsx)(Re.a,{value:e,children:e},t)}))})]}),Object(u.jsx)($e,{setOpen:v,setDialogOpen:x,bookName:e.name,status:s,bookId:e.bookId,bookCover:e.cover,startDate:e.startDate,endDate:e.endDate,targetDate:e.targetDate,rating:e.rating,reviewContent:e.reviewContent,reviewTimeStamp:e.reviewTimeStamp}),s!==Ie.NONE&&Object(u.jsx)("div",{className:"UserBookStatus-edit-details-wrapper",children:Object(u.jsx)("p",{onClick:function(){x(!0)},children:"Edit Dates & Submit Review"})})]})},at=(a(240),function(e){var t=Object(r.useState)(e.rating||0),a=Object(i.a)(t,2),s=a[0],n=a[1],c=Object(r.useContext)(l),o=c.user,d=c.setUser,j=Object(r.useContext)(V).raiseSnackbarMessage,b=function(){var t=Object(O.a)(h.a.mark((function t(a,r){var c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=null===o||void 0===o?void 0:o.token)||(j("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),d(null)),n(r),t.next=5,Q()({method:"PATCH",url:"https://sid-better-reads.herokuapp.com"+"/api/book/".concat(e.bookId),headers:{Authorization:"Bearer ".concat(c)},data:{rating:{prev:s,current:r},cover:e.cover,name:e.name}});case 5:401===(i=t.sent).status?(j(i.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),d(null)):200!==i.status&&j(i.data.message,"error");case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(e.rating?e.rating:0)}),[e.bookId,e.rating]),Object(u.jsxs)("div",{className:"UserBookRating",children:[Object(u.jsx)("div",{className:"UserBookRating-title-wrapper",children:Object(u.jsx)("p",{children:s>0?"My rating":"Rate this book"})}),Object(u.jsx)(ie.a,{name:"half-rating",value:s,precision:.5,onChange:b})]})}),rt=(a(241),function(e){var t=Object(r.useContext)(l).user,a=e.reviews,s=e.userId,n=e.userReview,c=Object(r.useContext)(d),o=Math.ceil((a&&a.length?a.length:0)/10),j=Object(r.useState)(1),b=Object(i.a)(j,2),p=b[0],h=b[1],O=t.profile.name,m=t.profile.profilePicUrl;return Object(u.jsxs)("div",{className:"BookReviews",children:[n&&n.reviewContent?Object(u.jsxs)("div",{className:"BookReviews-review",children:[Object(u.jsx)("div",{className:"BookReviews-review-image-wrapper",children:Object(u.jsx)("img",{src:m})}),Object(u.jsxs)("div",{className:"BookReviews-review-body-wrapper",children:[Object(u.jsxs)("div",{className:"BookReviews-review-header-wrapper ".concat(c<900?"mobile900":null),children:[Object(u.jsx)("p",{className:"BookReviews-review-user-name",children:O}),Object(u.jsx)("p",{className:"BookReviews-review-published-date",children:ne()(n.reviewTimeStamp).format("D MMM, YY")})]}),Object(u.jsx)("div",{className:"BookReviews-review-content-wrapper",children:Object(u.jsx)("span",{children:n.reviewContent})})]})]}):null,a&&a.length?a.slice(10*(p-1),10*p).filter((function(e){return e._id!==s})).map((function(e,t){return Object(u.jsxs)("div",{className:"BookReviews-review",children:[Object(u.jsx)("div",{className:"BookReviews-review-image-wrapper",children:Object(u.jsx)("img",{src:e.profilePicUrl})}),Object(u.jsxs)("div",{className:"BookReviews-review-body-wrapper",children:[Object(u.jsxs)("div",{className:"BookReviews-review-header-wrapper ".concat(c<900?"mobile900":null),children:[Object(u.jsx)("p",{className:"BookReviews-review-user-name",children:e.userName}),Object(u.jsx)("p",{className:"BookReviews-review-published-date",children:ne()(e.timeStamp).format("D MMM, YY")})]}),Object(u.jsx)("div",{className:"BookReviews-review-content-wrapper",children:Object(u.jsx)("span",{children:e.reviewContent})})]})]},t)})):null,a&&a.length?Object(u.jsx)("div",{className:"BookReviews-pagination-wrapper",children:Object(u.jsx)(ce.a,{count:o,page:p,onChange:function(e,t){h(t)},variant:"outlined",color:"primary"})}):null]})}),st=a(158),nt=a.n(st),ct="/ImgNotAvailable.jpg",it=[{background:"linear-gradient(#7D141D, #FF1E27)",color:"#F4EFEA"},{backgroundColor:"#292826",color:"#F9D342"},{backgroundColor:"#FBEAEB",color:"#2F3C7E"},{background:"linear-gradient(#F6B042, #F9ED4E)",color:"#533549,"},{backgroundColor:"#AA96DA",color:"#FFFFD2"},{backgroundColor:"#080A52",color:"#EB2188"}],ot=function(){var e,t=Object(o.e)(),a=Object(r.useState)(null),s=Object(i.a)(a,2),n=s[0],c=s[1],j=Object(r.useState)(null),b=Object(i.a)(j,2),p=b[0],m=b[1],v=Object(r.useState)(null),x=Object(i.a)(v,2),g=x[0],f=x[1],k=Object(r.useContext)(V).raiseSnackbarMessage,w=Object(r.useContext)(l),N=w.user,C=(w.setUser,Object(r.useContext)(d)),y=Object(o.f)(),D=t.pathname.split("/").pop(),S=Object(r.useState)(null),B=Object(i.a)(S,2),A=B[0],R=B[1],M=Object(r.useState)(null),T=Object(i.a)(M,2),E=T[0],U=T[1],I=Object(r.useState)(null),Y=Object(i.a)(I,2),P=Y[0],_=Y[1],F=Object(r.useState)(null),L=Object(i.a)(F,2),G=L[0],W=L[1],z=Object(r.useState)(0),H=Object(i.a)(z,2),q=H[0],J=H[1];G&&(G.wantToReadCount||G.readCount||G.currentlyReadingCount)&&(e={labels:[Ie.CURRENTLY_READING,Ie.WANT_TO_READ,Ie.READ],datasets:[{data:[G.currentlyReadingCount,G.wantToReadCount,G.readCount],backgroundColor:["#292826","rgb(255, 99, 132)","#AA96DA","rgb(255, 205, 86)","rgb(54, 162, 235)"]}]}),Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Book component Re-render ",D),Q()({method:"GET",url:"https://openlibrary.org/works/"+t.pathname.split("/").pop()+".json"}).then((function(e){if(200!==e.status)k("Unable to retrieve the Book info. Please try again","error");else{c(e.data);var t=e.data.authors&&e.data.authors.length?e.data.authors[0].author.key:null;if(null===t)return;Q()({method:"GET",url:"https://openlibrary.org"+t+".json"}).then((function(e){m(e.data)}))}})),a=null===N||void 0===N?void 0:N.token,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/book/"+t.pathname.split("/").pop(),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){500===e.status?k(e.data.message,"error"):(f(e.data),_({reviewContent:e.data.reviewContent,reviewTimeStamp:e.data.reviewTimeStamp}),R(e.data.status))})),Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/bookReviews/"+t.pathname.split("/").pop(),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){200!==e.status?k(e.data.message,"error"):U(e.data)})),e.next=7,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/book/"+t.pathname.split("/").pop()+"/stats",headers:{Authorization:"Bearer ".concat(a)}});case 7:(r=e.sent)&&r.data&&200===r.status?(W(r.data),J(100*r.data.averageRating/5)):k(r.data.message,"error");case 9:case"end":return e.stop()}}),e)}))),[D]);var K=Object(u.jsx)("div",{className:"BookResults-no-results",children:Object(u.jsx)("p",{children:"No results to display. Please try a different Search"})});return Object(u.jsx)("div",{className:"Book ".concat(C<1200?"mobile1200":""),children:n&&n.title?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"Book-header",children:[Object(u.jsx)("div",{className:"Book-Thumbnail-section-wrapper",children:Object(u.jsx)("div",{className:"Book-Thumbail-wrapper",children:Object(u.jsx)("img",{src:n&&n.covers&&n.covers.length?"https://covers.openlibrary.org/b/id/"+(null===n||void 0===n?void 0:n.covers[0])+"-M.jpg":ct,alt:ct})})}),Object(u.jsxs)("div",{className:"Book-details-section-wrapper ".concat(C<=900?"mobile":""),children:[Object(u.jsx)("div",{className:"Book-details-title-wrapper",title:null===n||void 0===n?void 0:n.title,children:Object(u.jsx)("p",{children:null===n||void 0===n?void 0:n.title})}),p&&p.name&&Object(u.jsxs)("div",{className:"Book-details-author-wrapper",title:null===p||void 0===p?void 0:p.name,children:["by ",Object(u.jsxs)("p",{authorid:null===p||void 0===p?void 0:p.key,onClick:function(e){var t=e.currentTarget.getAttribute("authorid").split("/").pop();y("/author/".concat(t),{state:t})},children:[" ",null===p||void 0===p?void 0:p.name," "]})]}),Object(u.jsx)("div",{className:"Book-details-description-wrapper",title:n&&n.description?n.description.value:"",children:Object(u.jsx)("p",{children:n&&n.description?n.description.value:""})})]})]}),Object(u.jsxs)("div",{className:"Book-current-user-utils-wrapper ".concat(A),children:[Object(u.jsx)("div",{className:"Book-current-user-status-wrapper",children:Object(u.jsx)(Ve.Provider,{value:{setCurrentUserReview:_,bookId:t.pathname.split("/").pop()},children:Object(u.jsx)(tt,{bookId:t.pathname.split("/").pop(),cover:n&&n.covers&&n.covers.length?n.covers[0]:ct,name:null===n||void 0===n?void 0:n.title,status:A,rating:null===g||void 0===g?void 0:g.rating,startDate:null===g||void 0===g?void 0:g.startDate,endDate:null===g||void 0===g?void 0:g.endDate,targetDate:null===g||void 0===g?void 0:g.targetDate,updateStatus:R,reviewContent:null===g||void 0===g?void 0:g.reviewContent,reviewTimeStamp:null===g||void 0===g?void 0:g.reviewTimeStamp})})}),Object(u.jsx)("div",{className:"Book-current-user-rating-wrapper",children:Object(u.jsx)(at,{bookId:t.pathname.split("/").pop(),cover:n&&n.covers&&n.covers.length?n.covers[0]:ct,name:null===n||void 0===n?void 0:n.title,status:null===g||void 0===g?void 0:g.status,rating:null===g||void 0===g?void 0:g.rating})}),Object(u.jsxs)("div",{className:"Book-stats-wrapper",children:[G&&G.averageRating?Object(u.jsxs)("div",{className:"Book-stats-rating-wrapper",children:[Object(u.jsx)(nt.a,{progress:q.toFixed(2),radius:100,className:"".concat(q>75?"green":q>50?"orange":"red"),children:Object(u.jsxs)("span",{className:"Book-stats-rating-content",children:[G.averageRating," / ",5]})}),Object(u.jsxs)("span",{children:[G.ratingCount," ",G.ratingCount>1?"ratings":"rating"]})]}):null,e?Object(u.jsx)("div",{className:"Book-stats-chart-wrapper",children:Object(u.jsx)("div",{className:"Book-stats-chart",children:Object(u.jsx)(le.b,{responsive:!0,data:e,height:200,width:200,options:{plugins:{legend:{display:!1}}}})})}):null]})]}),n&&(n.subject_people||n.subject_places)&&Object(u.jsxs)("div",{className:"Book-extras",children:[Object(u.jsx)("div",{className:"Book-characters-wrapper ".concat(C<=850?"mobile":""),children:n&&n.subject_people&&n.subject_people.filter((function(e,t){return t<10})).map((function(e,t){return Object(u.jsx)(De.a,{label:e,title:e,style:it[t%it.length]},e)}))}),Object(u.jsx)("div",{className:"Book-places-wrapper ".concat(C<=850?"mobile":""),children:n&&n.subject_places&&n.subject_places.filter((function(e,t){return t<10})).map((function(e,t){return Object(u.jsx)(De.a,{label:e,title:e,style:it[it.length-1-t%it.length],color:"primary"},e)}))})]}),p&&p.name?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"Book-author-works-title-wrapper",children:Object(u.jsxs)("p",{children:[" Works by ",p.name," "]})}),Object(u.jsx)("div",{className:"Book-author-works-wrapper",children:Object(u.jsx)(Be,{id:null===p||void 0===p?void 0:p.key,limit:20})})]}):null,E&&E.reviews&&E.reviews.length||P&&P.reviewContent?Object(u.jsxs)("div",{className:"Book-reviews-wrapper",children:[Object(u.jsx)("div",{className:"Book-reviews-title-wrapper",children:Object(u.jsx)("p",{children:"Community Reviews"})}),Object(u.jsx)(rt,{bookId:t.pathname.split("/").pop(),reviews:null===E||void 0===E?void 0:E.reviews,userReview:P,userId:null===E||void 0===E?void 0:E.userId})]}):null,Object(u.jsx)("div",{className:"Book-footer"})]}):K})},lt=a(3),dt=(a(248),"/ImgNotAvailable.jpg"),ut=function(e){var t=Object(o.e)();console.log(t);var a=t.pathname.split("/").pop();console.log(a);var s=Object(r.useState)(null),n=Object(i.a)(s,2),c=n[0],l=n[1],j=Object(r.useContext)(V).raiseSnackbarMessage,b=Object(r.useContext)(d);Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()({method:"GET",url:"https://openlibrary.org/authors/"+a+".json"});case 2:if((t=e.sent)&&t.data&&200===t.status){e.next=6;break}return j("Unable to retrieve the Author info. Please try again.","error"),e.abrupt("return");case 6:console.log(t.data),l(t.data);case 8:case"end":return e.stop()}}),e)}))),[]);var p=Object(u.jsx)("div",{className:"BookResults-no-results",children:Object(u.jsx)("p",{children:"Nothing to display."})});return Object(u.jsx)("div",{className:"Author ".concat(b<1200?"mobile1200":""),children:c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"Author-header",children:[Object(u.jsx)("div",{className:"Author-pic-wrapper",children:Object(u.jsx)("img",Object(lt.a)({src:dt},"src",c&&c.photos&&c.photos.length?"https://covers.openlibrary.org/a/id/"+c.photos[0]+"-L.jpg":dt))}),Object(u.jsxs)("div",{className:"Author-details-wrapper",children:[Object(u.jsx)("div",{className:"Author-details-name-wrapper",children:Object(u.jsx)("p",{children:null===c||void 0===c?void 0:c.name})}),c&&c.birth_date&&Object(u.jsxs)("div",{className:"Author-details-birth-date-wrapper",children:[Object(u.jsx)("span",{children:"Birth Date: "}),Object(u.jsx)("span",{className:"Author-details-birth-date",children:null===c||void 0===c?void 0:c.birth_date})]}),Object(u.jsx)("div",{className:"Author-details-bio-wrapper",children:Object(u.jsx)("p",{children:null===c||void 0===c?void 0:c.bio})}),Object(u.jsxs)("div",{className:"Author-details-links-wrapper",children:[c&&c.links&&c.links.length&&c.links.filter((function(e,t){return t<1})).map((function(e,t){return Object(u.jsx)("div",{className:"Author-details-link",children:Object(u.jsx)("a",{href:e.url,target:"_blank",children:"Website"})},t)})),Object(u.jsx)("div",{className:"Author-details-link",children:c&&c.wikipedia&&Object(u.jsx)("a",{href:c.wikipedia,target:"_blank",children:"Wiki"})})]})]})]}),Object(u.jsxs)("div",{className:"Author-author-works-wrapper",children:[Object(u.jsx)("div",{className:"Author-author-works-title-wrapper",children:Object(u.jsx)("p",{children:" Works By the Author "})}),Object(u.jsx)(Be,{id:null===c||void 0===c?void 0:c.key,limit:30})]}),Object(u.jsx)("div",{className:"Author-footer"})]}):p})},jt=(a(249),a(250),a(70)),bt=a.n(jt),pt="/ImgNotAvailable.jpg",ht=function(e){var t=e.books,a=Object(o.f)(),r=function(e){var t=e.currentTarget.getAttribute("bookid");a("/book/".concat(t),{state:t})};return Object(u.jsx)("div",{className:"BooksTile",children:t&&t.filter((function(e,t){return t<10})).map((function(t,a){return Object(u.jsxs)("div",{className:"BooksTile-book-wrapper",children:[Object(u.jsx)("div",{className:"BooksTile-cover-wrapper",onClick:r,bookid:t._id,children:Object(u.jsx)("img",{src:t.cover?"https://covers.openlibrary.org/b/id/"+t.cover+"-M.jpg":pt,alt:pt,title:t.name})}),Object(u.jsxs)("div",{className:"BooksTile-name-wrapper",children:[e.displayRating&&t&&t.rating?Object(u.jsx)(ie.a,{value:t.rating,precision:.5,readOnly:!0}):null,e.displayStarted&&t&&t.startDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-started",children:["Started: ",Object(u.jsx)(bt.a,{date:t.startDate,format:"D MMM YYYY"})]}):null,e.displayCompleted&&t&&t.endDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-completed",children:["Completed: ",Object(u.jsx)(bt.a,{date:t.endDate,format:"D MMM YYYY"})]}):null,e.displayTarget&&t&&t.targetDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-target",children:["Target: ",Object(u.jsx)(bt.a,{date:t.targetDate,format:"D MMM YYYY"})]}):null]})]},t._id+" "+a)}))})},Ot=function(){var e=Object(r.useContext)(l),t=e.user,a=e.setUser,s=(Object(r.useRef)(window.innerWidth),Object(r.useContext)(V).raiseSnackbarMessage),n=Object(r.useState)(null),c=Object(i.a)(n,2),d=c[0],j=c[1],b=Object(o.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(s("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/mybooks",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(n=e.sent).status&&(s(n.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===n.status){e.next=9;break}return s(n.data.message,"error"),e.abrupt("return");case 9:j(n.data);case 10:case"end":return e.stop()}}),e)}))),[]);var p=function(e){var t=e.currentTarget.getAttribute("type").trim();t=encodeURI(t),b("".concat(t),{state:d[t]})};return Object(u.jsxs)("div",{className:"MyBooks",children:[d&&Object(u.jsxs)(u.Fragment,{children:[Ue&&Ue.length&&Ue.map((function(e,t){return d&&d[e]&&d[e].length?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"MyBooks-title-wrapper",children:[Object(u.jsx)("span",{className:"MyBooks-title",children:e}),d[e]&&d[e].length>10?Object(u.jsx)("span",{className:"Mybooks-show-more",type:e,onClick:p,children:"Show more"}):null]}),Object(u.jsx)("div",{className:"MyBooks-type-section-wrapper ".concat(e),children:Object(u.jsx)(ht,{books:d[e],displayStarted:e===Ie.CURRENTLY_READING,displayCompleted:e===Ie.READ,displayTarget:e===Ie.WANT_TO_READ})})]},e+" "+t):null})),d&&d.rated&&d.rated.length?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"MyBooks-title-wrapper",children:[Object(u.jsx)("span",{className:"MyBooks-title",children:"Rated"}),d.rated&&d.rated.length>10?Object(u.jsx)("span",{className:"Mybooks-show-more",type:"rated",onClick:p,children:"Show more"}):null]}),Object(u.jsx)("div",{className:"MyBooks-type-section-wrapper rated",children:Object(u.jsx)(ht,{books:d.rated,displayRating:!0})})]}):null]}),Object(u.jsx)("div",{className:"MyBooks-recommended-wrapper"})]})},mt=(a(251),"/ImgNotAvailable.jpg"),vt=function(e){var t,a=Object(o.e)();console.log(a);var s=null===(t=decodeURI(a.pathname).split("/"))||void 0===t?void 0:t.pop(),n=Object(r.useContext)(l),c=n.user,j=n.setUser,b=Object(r.useState)([]),p=Object(i.a)(b,2),m=p[0],v=p[1],x=Object(r.useContext)(V).raiseSnackbarMessage,g=!1,f=Math.ceil((m&&m.length?m.length:0)/10),k=Object(r.useState)(1),w=Object(i.a)(k,2),N=w[0],C=w[1],y=Object(r.useContext)(d),D=Object(o.f)();if("rated"===s)g=!0;else for(var S in Ie)if(Ie[S]===s){g=!0;break}var B=function(e){var t=e.currentTarget.getAttribute("itemid");D("/book/".concat(t),{state:t})};Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=null===c||void 0===c?void 0:c.token)||(x("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),j(null)),g){e.next=5;break}return x("No results to display.","info"),e.abrupt("return");case 5:return e.next=7,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/mybooks/"+s,headers:{Authorization:"Bearer ".concat(t)}});case 7:if(401===(a=e.sent).status&&(x(a.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),j(null)),200===a.status){e.next=12;break}return x(a.data.message,"error"),e.abrupt("return");case 12:console.log(a.data[s]),v(a.data[s]);case 14:case"end":return e.stop()}}),e)}))),[]);var A=Object(u.jsx)("div",{className:"BookResults-no-results",children:Object(u.jsx)("p",{children:"No results to display."})});return Object(u.jsxs)("div",{className:"MyBooksDetails",children:[g?Object(u.jsx)("div",{className:"MyBooksDetails-results-wrapper",children:m&&m.length&&m.slice(10*(N-1),10*N).map((function(e){return Object(u.jsx)("div",{coverid:e.cover,itemID:e._id,className:"MyBooksDetails-result-card ".concat(y<800?"mobile":y<1e3?"tablet":""),children:Object(u.jsxs)(fe.a,{sx:{maxWidth:345},itemID:e._id,onClick:B,children:[Object(u.jsx)(Ne.a,{component:"img",alt:mt,image:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":mt}),Object(u.jsxs)("div",{className:"MyBooksDetails-result-card-details-wrapper",title:null===e||void 0===e?void 0:e.name,children:[Object(u.jsx)("p",{children:null===e||void 0===e?void 0:e.name}),"rated"===s&&e&&e.rating?Object(u.jsx)(ie.a,{value:e.rating,precision:.5,readOnly:!0}):null,s===Ie.CURRENTLY_READING&&e&&e.startDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-started",children:["Started: ",Object(u.jsx)(bt.a,{date:e.startDate,format:"D MMM YYYY"})]}):null,s===Ie.READ&&e&&e.endDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-completed",children:["Completed: ",Object(u.jsx)(bt.a,{date:e.endDate,format:"D MMM YYYY"})]}):null,s===Ie.WANT_TO_READ&&e&&e.targetDate?Object(u.jsxs)("span",{className:"BooksTile-name-wrapper-target",children:["Target: ",Object(u.jsx)(bt.a,{date:e.endDate,format:"D MMM YYYY"})]}):null]})]})},e._id)}))}):A,g?Object(u.jsx)("div",{className:"MyBooksDetails-pagination-wrapper",children:Object(u.jsx)(ce.a,{count:f,page:N,onChange:function(e,t){C(t)},variant:"outlined",color:"primary"})}):null]})},xt=(a(252),function(e){var t=Object(r.useContext)(l),a=t.user,s=t.setUser,n=Object(o.e)().state,c=Object(r.useState)(null),j=Object(i.a)(c,2),b=j[0],p=j[1],m=Object(r.useContext)(d),v=Object(r.useContext)(V).raiseSnackbarMessage,x=Math.ceil((b&&b.length?b.length:0)/10),g=Object(r.useState)(1),f=Object(i.a)(g,2),k=f[0],w=f[1],N=Object(o.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=null===a||void 0===a?void 0:a.token)||(v("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),s(null)),!n||!n.reviews){e.next=6;break}p(n.reviews),e.next=14;break;case 6:return e.next=8,Q()({method:"GET",url:"https://sid-better-reads.herokuapp.com/api/userActivity/userReviews",headers:{Authorization:"Bearer ".concat(t)}});case 8:if(401===(r=e.sent).status&&(v(r.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),s(null)),200===r.status){e.next=13;break}return v(r.data.message,"error"),e.abrupt("return");case 13:p(r.data.reviews);case 14:case"end":return e.stop()}}),e)}))),[]);var C=function(e){var t=e.currentTarget.getAttribute("bookid");N("/book/".concat(t),{state:t})};return Object(u.jsxs)("div",{className:"MyReviews ".concat(m<1200?"mobile1200":null),children:[b&&b.length?b.slice(10*(k-1),10*k).map((function(e,t){return Object(u.jsxs)("div",{className:"MyReviews-row",children:[Object(u.jsx)("div",{className:"MyReviews-row-cover-wrapper",children:Object(u.jsx)("img",{src:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":"/ImgNotAvailable.jpg",onClick:C,bookid:e._id})}),Object(u.jsxs)("div",{className:"MyReviews-row-details-wrapper",children:[Object(u.jsx)("div",{className:"MyReviews-row-title-wrapper",children:Object(u.jsx)("p",{children:e.name})}),Object(u.jsx)("div",{className:"MyReviews-row-review-wrapper",children:Object(u.jsx)("p",{children:e.reviewContent})})]})]},t)})):null,b&&b.length?Object(u.jsx)("div",{className:"MyReviews-pagination-wrapper",children:Object(u.jsx)(ce.a,{count:x,page:k,onChange:function(e,t){w(t)},variant:"outlined",color:"primary"})}):null]})}),gt=(a(253),function(){var e=Object(r.useContext)(d);return Object(u.jsx)("div",{className:"Friends Home",children:Object(u.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(u.jsx)("p",{children:"F.R.I.E.N.D.S feature development is in progress. Keep an eye out"}),Object(u.jsx)(j,{targetDate:"Dec 22, 2021 00:00:00"})]})})}),ft=(a(254),function(){var e=Object(r.useContext)(d);return Object(u.jsx)("div",{className:"Communities Home",children:Object(u.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(u.jsx)("p",{children:"Communities feature development is in progress. Keep an eye out"}),Object(u.jsx)(j,{targetDate:"Dec 22, 2021 00:00:00"})]})})}),kt=(a(255),function(){return Object(u.jsx)("div",{className:"NotFound",children:Object(u.jsx)("p",{children:"The page you're looking for does not exist."})})});var wt=function(){var e=JSON.parse(localStorage.getItem("betterreadsuserinfo")),t=Object(r.useState)(e),a=Object(i.a)(t,2),s=a[0],n=a[1],c=Object(r.useState)(window.innerWidth),j=Object(i.a)(c,2),p=j[0],h=j[1],O=Object(r.useState)(!1),m=Object(i.a)(O,2),v=m[0],x=m[1],g=Object(r.useRef)(null);Object(r.useEffect)((function(){window.addEventListener("resize",(function(){h(window.innerWidth)}))}),[]);var f=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)($,{}),Object(u.jsx)("div",{className:"App-body-wrapper ".concat(p<600?"mobile":""),children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(b,{})}),Object(u.jsx)(o.a,{path:"/profile",element:Object(u.jsx)(pe,{})}),Object(u.jsx)(o.a,{path:"/bookresults",element:Object(u.jsx)(ye,{})}),Object(u.jsx)(o.a,{path:"/book/:bookId",element:Object(u.jsx)(ot,{})}),Object(u.jsx)(o.a,{path:"/author/:authorId",element:Object(u.jsx)(ut,{})}),Object(u.jsx)(o.a,{path:"/mybooks",element:Object(u.jsx)(Ot,{})}),Object(u.jsx)(o.a,{path:"/mybooks/:status",element:Object(u.jsx)(vt,{})}),Object(u.jsx)(o.a,{path:"/myReviews",element:Object(u.jsx)(xt,{})}),Object(u.jsx)(o.a,{path:"/friends",element:Object(u.jsx)(gt,{})}),Object(u.jsx)(o.a,{path:"/communities",element:Object(u.jsx)(ft,{})}),Object(u.jsx)(o.a,{path:"*",element:Object(u.jsx)(kt,{})})]})})]});return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(l.Provider,{value:{user:s,setUser:n},children:Object(u.jsxs)(V.Provider,{value:{snackbarOpen:v,toggleSnackbar:x,snackbarObj:g,raiseSnackbarMessage:function(e,t){g.current={},g.current.severity=t,g.current.message=e,x(!0)}},children:[Object(u.jsx)(d.Provider,{value:p,children:s?f:Object(u.jsx)(te,{})}),Object(u.jsx)(ge,{})]})})})},Nt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,362)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))};c.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(_.a,{children:Object(u.jsx)(wt,{})})}),document.getElementById("root")),Nt()}},[[256,1,2]]]);
//# sourceMappingURL=main.88862796.chunk.js.map