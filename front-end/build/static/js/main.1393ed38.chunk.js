(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{192:function(e,t,a){},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},228:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(53),c=a.n(n),o=(a(192),a(6)),i=a(15),l=(a(193),Object(r.createContext)(null)),d=(a(194),Object(r.createContext)(null)),j=(a(195),a(0)),u=function(e){var t=new Date(e.targetDate||"Dec 22, 2021 00:00:00").getTime(),a=Object(r.useState)(""),s=Object(o.a)(a,2),n=s[0],c=s[1],i=setInterval((function(){var e=(new Date).getTime(),a=t-e,r=Math.floor(a/864e5),s=Math.floor(a%864e5/36e5),n=Math.floor(a%36e5/6e4),o=Math.floor(a%6e4/1e3);c(r+"d "+s+"h "+n+"m "+o+"s "),a<0&&(clearInterval(i),c("The latest features are on their way!"))}),1e3);return Object(j.jsx)("div",{className:"CountdownClock",children:n})},b=function(){Object(r.useContext)(l).user,Object(i.f)();var e=Object(r.useContext)(d);return Object(j.jsx)("div",{className:"Home",children:Object(j.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(j.jsx)("p",{children:"Home tab feature development is in progress. Keep an eye out"}),Object(j.jsx)(u,{targetDate:"Dec 22, 2021 00:00:00"})]})})},p=a(18),h=a.n(p),O=a(27),v=(a(198),a(350)),m=a(349),x=a(321),g=a(342),f=a(346),k=a(348),w=a(335),N=a(319),C=a(320),y=a(152),D=a.n(y),S=a(347),B=a(148),A=a.n(B),R=a(149),M=a.n(R),T=a(151),E=a.n(T),I=a(150),U=a.n(I),Y=a(147),P=a.n(Y),_=a(30),F=a(162),L=a(38),W=a(318),G=a(145),z=a.n(G),H=(a(199),a(143)),J=a.n(H),K=a(354),q=function(e){var t=e.setClassName||"",a=e.setPlaceHolder||"Better Reads search...",s=Object(r.useState)(null),n=Object(o.a)(s,2),c=n[0],i=n[1],l=function(t){t.preventDefault(),e.searchSubmit({inputValue:c})};return Object(j.jsx)("div",{className:"SearchBar",children:Object(j.jsxs)(F.a,{className:t,component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:400},children:[Object(j.jsx)(L.c,{sx:{ml:1,flex:1},placeholder:a,inputProps:{"aria-label":"search google maps"},onSubmit:l,value:c,onChange:function(e){i(e.target.value)}}),e.displayLoadingSpinner?Object(j.jsx)("div",{className:"SearchBar-loading-spinner-wrapper",children:Object(j.jsx)(K.a,{})}):Object(j.jsxs)(j.Fragment,{children:[c&&c.length>0?Object(j.jsx)(J.a,{className:"Searchbar-clear",onClick:function(e){i("")}}):null,Object(j.jsx)(W.a,{sx:{height:28,m:.5},orientation:"vertical"}),Object(j.jsx)(f.a,{type:"submit",sx:{p:"10px"},"aria-label":"search",onClick:l,children:Object(j.jsx)(z.a,{})})]})]})})},V=Object(r.createContext)(null),Z=a(21),Q=a.n(Z),X=240,$=function(e){var t=e.window,a=s.a.useState(!1),n=Object(o.a)(a,2),c=n[0],u=n[1],b=Object(r.useContext)(l).user,p=b.profile.profilePicUrl,y=b&&b.profile&&b.profile.name?b.profile.name:"",B=y.split(" "),R=Object(r.useState)(!1),T=Object(o.a)(R,2),I=T[0],Y=T[1],F=B[0][0];B.length>1&&(F+=B.pop()[0]);var L=Object(r.useContext)(V).raiseSnackbarMessage,W=Object(i.f)(),G=Object(r.useContext)(d),z=function(){var e=Object(O.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.inputValue,Y(!0),e.next=4,Q()({method:"GET",url:"http://openlibrary.org/search.json?q="+encodeURI(a)});case 4:r=e.sent,Y(!1),200!==r.status||0===r.data.numFound?L("Unable to fetch the Search result. Please try again later or try a different search","error"):W("bookresults?q=".concat(a),{state:r.data});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){u(!c)},J=Object(j.jsxs)("div",{children:[Object(j.jsx)(S.a,{}),Object(j.jsxs)(k.a,{children:[Object(j.jsx)(_.b,{to:"/",className:"NavSideBar-item",children:Object(j.jsxs)(w.a,{button:!0,onClick:H,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(P.a,{})}),Object(j.jsx)(C.a,{primary:"Home"})]},"Home")}),Object(j.jsx)(_.b,{to:"/profile",className:"NavSideBar-item",onClick:H,children:Object(j.jsxs)(w.a,{button:!0,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(A.a,{})}),Object(j.jsx)(C.a,{primary:"Profile"})]},"Profile")}),Object(j.jsx)(_.b,{to:"/mybooks",className:"NavSideBar-item",onClick:H,children:Object(j.jsxs)(w.a,{button:!0,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(M.a,{})}),Object(j.jsx)(C.a,{primary:"My Books"})]},"My Books")}),Object(j.jsx)(_.b,{to:"/friends",className:"NavSideBar-item",onClick:H,children:Object(j.jsxs)(w.a,{button:!0,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(U.a,{})}),Object(j.jsx)(C.a,{primary:"Friends"})]},"Friends")}),Object(j.jsx)(_.b,{to:"/communities",className:"NavSideBar-item",onClick:H,children:Object(j.jsxs)(w.a,{button:!0,children:[Object(j.jsx)(N.a,{children:Object(j.jsx)(E.a,{})}),Object(j.jsx)(C.a,{primary:"Communities"})]},"Communities")})]})]}),K=void 0!==t?function(){return t().document.body}:void 0;return Object(j.jsxs)(m.a,{sx:{display:"flex"},className:"NavSideBar",children:[Object(j.jsx)(x.a,{}),Object(j.jsx)(v.a,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(X,"px)")},ml:{sm:"".concat(X,"px")}},children:Object(j.jsxs)(S.a,{children:[Object(j.jsx)(f.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:H,sx:{mr:2,display:{sm:"none"}},children:Object(j.jsx)(D.a,{})}),Object(j.jsxs)("div",{className:"NavSideBar-user-profile-wrapper",children:[Object(j.jsx)("div",{className:"NavSideBar-Search-wrapper",children:Object(j.jsx)(q,{setPlaceHolder:"Search Books/Authors",searchSubmit:z,displayLoadingSpinner:I})}),Object(j.jsxs)("div",{className:"NavSideBar-user-profile-info-wrapper",title:y,onClick:function(){W("/profile")},children:[Object(j.jsx)("div",{className:"NavSideBar-user-profile-pic-wrapper",children:Object(j.jsx)("img",{src:p,className:"NavSideBar-user-profile-pic"})}),Object(j.jsx)("div",{className:"NavSideBar-user-profile-name-wrapper ".concat(G<700?"no-display":null),children:Object(j.jsx)("p",{className:"NavSideBar-user-profile-name",children:F})})]})]})]})}),Object(j.jsxs)(m.a,{component:"nav",sx:{width:{sm:X},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[Object(j.jsx)(g.a,{container:K,variant:"temporary",open:c,onClose:H,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:X}},children:J}),Object(j.jsx)(g.a,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:X}},open:!0,children:J})]}),Object(j.jsx)(m.a,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(X,"px)")}}})]})},ee=(a(224),a(153));var te=function(){var e=Object(r.useContext)(l),t=(e.user,e.setUser);return Object(j.jsx)("div",{className:"Login",children:Object(j.jsxs)("div",{className:"Login-wrapper",children:[Object(j.jsxs)("div",{className:"Login-header",children:[Object(j.jsx)("div",{className:"Login-header-title-wrapper",children:Object(j.jsx)("p",{className:"Login-header-title",children:"Better Reads"})}),Object(j.jsx)("p",{className:"Login-header-caption",children:"A social network for Bookworms!"})]}),Object(j.jsxs)("div",{className:"Login-types-wrapper",children:[Object(j.jsx)("div",{className:"Login-types-text-wrapper",children:Object(j.jsx)("p",{children:"Discover & read more"})}),Object(j.jsx)("div",{className:"Login-google",children:Object(j.jsx)(ee.GoogleLogin,{clientId:"254569771516-40je0pa4mcdo2757f3n7c1dcegkb7som.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:function(e){Q()({method:"POST",url:"http://localhost:4000/api/login/googlelogin",data:{tokenId:e.tokenId}}).then((function(e){if(400===e.status)alert(e.data.error);else{var a={token:e.data.token,profile:e.data.user};localStorage.setItem("betterreadsuserinfo",JSON.stringify(a)),t(a)}}))},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"})})]})]})})},ae=(a(225),a(343)),re=function(e){var t=e;if(e>=1e3){e=Math.round(e);for(var a=Math.floor((""+e).length/3),r="",s=2;s>=1;s--){if(((r=parseFloat((0!=a?e/Math.pow(1e3,a):e).toPrecision(s)))+"").replace(/[^a-zA-Z 0-9]+/g,"").length<=2)break}r%1!=0&&(r=r.toFixed(1)),t=r+["","k","m","b","t"][a]}return t},se=(a(226),a(48)),ne=a.n(se),ce=a(333),oe=a(336),ie=function(e){var t=e.data,a=Object(r.useContext)(d),s=Math.ceil((t&&t.length?t.length:0)/10),n=Object(r.useState)(1),c=Object(o.a)(n,2),l=c[0],u=c[1],b=Object(i.f)(),p=function(e){var t=e.currentTarget.getAttribute("bookid");b("/book/".concat(t),{state:t})};return Object(j.jsxs)(j.Fragment,{children:[t&&t.length?t.slice(10*(l-1),10*l).map((function(e,t){return Object(j.jsxs)("div",{className:"UserActions-action ".concat(a<1200?"mobile1200":null),children:[Object(j.jsxs)("div",{className:"UserActions-book-cover-wrapper",children:[Object(j.jsx)("img",{src:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":"/ImgNotAvailable.jpg",onClick:p,bookid:e.bookId}),Object(j.jsx)("div",{className:"UserActions-book-timestamp-wrapper",children:Object(j.jsx)("p",{children:ne()(e.timestamp).format("Do MMM, YY")})})]}),Object(j.jsxs)("div",{className:"UserActions-details-wrapper",children:[Object(j.jsx)("div",{className:"UserActions-action-wrapper",children:Object(j.jsx)("p",{children:e.action})}),Object(j.jsxs)("div",{className:"UserActions-book-name-wrapper",children:[Object(j.jsx)("span",{className:"UserActions-book-name",children:e.bookName}),e.rating?Object(j.jsx)("span",{children:Object(j.jsx)(oe.a,{value:e.rating,precision:.5,readOnly:!0})}):null]}),e.reviewContent?Object(j.jsx)("div",{className:"UserActions-book-review-content-wrapper",children:Object(j.jsx)("p",{children:e.reviewContent})}):null]})]},t)})):null,t&&t.length?Object(j.jsx)("div",{className:"UserActions-pagination-wrapper",children:Object(j.jsx)(ce.a,{count:s,page:l,onChange:function(e,t){u(t)},variant:"outlined",color:"primary"})}):null]})},le=(a(228),a(229),a(87)),de=a(325),je=a(326),ue=a(339),be=function(e){var t=e.data,a=Object(r.useState)(!0),s=Object(o.a)(a,2),n=s[0],c=s[1],i=[],l=[];for(var d in t)i.push(d),l.push(t[d]);var u={labels:i,datasets:[{data:l,backgroundColor:["#292826","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(255, 99, 132)","#AA96DA"]}]};return Object(j.jsx)("div",{className:"UserRatingsChart",children:Object(j.jsxs)(de.a,{onClose:function(){e.setOpenReviewChart(!1)},open:e.open,children:[Object(j.jsx)(je.a,{children:"Rating distribution"}),Object(j.jsx)(ue.a,{checked:n,onChange:function(e){c(e.target.checked)},inputProps:{"aria-label":"controlled"}}),n?Object(j.jsx)(le.a,{data:u,height:200,width:200,options:{scales:{x:{grid:{display:!1}},y:{display:!1}},plugins:{legend:{display:!1}}}}):Object(j.jsx)(le.c,{data:u,height:200,width:200,options:{plugins:{legend:{display:!1}}}})]})})},pe=function(){var e=Object(r.useContext)(l),t=e.user,a=e.setUser,s=Object(r.useContext)(d),n=t.profile.name,c=t.profile.profilePicUrl,u=Object(r.useState)(null),b=Object(o.a)(u,2),p=b[0],v=b[1],m=Object(r.useState)(null),x=Object(o.a)(m,2),g=x[0],f=x[1],k=Object(r.useContext)(V).raiseSnackbarMessage,w=Object(r.useState)(null),N=Object(o.a)(w,2),C=N[0],y=N[1],D=Object(r.useState)(!1),S=Object(o.a)(D,2),B=S[0],A=S[1],R=Object(i.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,s,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(k("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"http://localhost:4000/api/userActivity",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(s=e.sent).status&&(k(s.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===s.status){e.next=9;break}return k(s.data.message,"error"),e.abrupt("return");case 9:if(n=0,s.data&&s.data.ratingMap&&s.data.ratingCount){for(c in 0,s.data.ratingMap)n+=c*s.data.ratingMap[c]/s.data.ratingCount;n=n.toFixed(2)}v({ratingCount:s.data.ratingCount,averageRating:n,ratingMap:s.data.ratingMap}),f(s.data.reviews);case 13:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(k("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"http://localhost:4000/api/userActions",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(s=e.sent).status&&(k(s.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===s.status){e.next=9;break}return k(s.data.message,"error"),e.abrupt("return");case 9:y(s.data);case 10:case"end":return e.stop()}}),e)}))),[]);return Object(j.jsxs)("div",{className:"Profile  ".concat(s<1400?"mobile":""),children:[Object(j.jsxs)("div",{className:"Profile-details-wrapper",children:[Object(j.jsx)("div",{className:"Profile-image-wrapper",children:Object(j.jsx)("img",{src:c,className:"Profile-user-pic"})}),Object(j.jsxs)("div",{className:"Profile-info-wrapper",children:[Object(j.jsx)("p",{className:"Profile-name",title:n,children:n}),p?Object(j.jsxs)("div",{className:"Profile-rating-wrapper",children:[p.ratingCount?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("span",{className:"Profile-rating-count",onClick:function(e){R("/mybooks/rated",{state:"rated"})},children:[re(p.ratingCount)," ",p.ratingCount>1?"ratings":"rating"]})}):null,p.averageRating>0?Object(j.jsxs)("span",{className:"Profile-average-rating",onClick:function(){A(!0)},children:["(",p.averageRating," average)"]}):null]}):null,g&&g.length?Object(j.jsx)("div",{className:"Profile-review-wrapper",children:Object(j.jsxs)("span",{className:"Profile-review-count",onClick:function(){R("/myReviews",{state:{reviews:g}})},children:[g.length," ",g.length>1?"reviews":"review"]})}):null,Object(j.jsx)(ae.a,{className:"Profile-sign-out",variant:"outlined",color:"error",onClick:function(){localStorage.setItem("betterreadsuserinfo",null),a(null)},children:"Sign Out"}),Object(j.jsx)(be,{data:null===p||void 0===p?void 0:p.ratingMap,open:B,setOpenReviewChart:A})]})]}),Object(j.jsx)("div",{className:"Profile-user-actions-wrapper",children:Object(j.jsx)(ie,{data:null===C||void 0===C?void 0:C.userActions})})]})},he=a(35),Oe=a(327),ve=a(337),me=a(334),xe=s.a.forwardRef((function(e,t){return Object(j.jsx)(me.a,Object(he.a)({elevation:6,ref:t,variant:"filled"},e))})),ge=function(e){var t,a,s=Object(r.useContext)(V),n=s.snackbarOpen,c=s.toggleSnackbar,o=s.snackbarObj,i=function(e,t){"clickaway"!==t&&c(!1)};return Object(j.jsx)(Oe.a,{spacing:2,sx:{width:"100%"},children:Object(j.jsx)(ve.a,{open:n,autoHideDuration:2e3,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(j.jsx)(xe,{onClose:i,severity:null===o||void 0===o||null===(t=o.current)||void 0===t?void 0:t.severity,sx:{width:"100%"},children:null===o||void 0===o||null===(a=o.current)||void 0===a?void 0:a.message})},"bottom + center")})},fe=(a(230),a(351)),ke=a(353),we=a(94),Ne=a(352),Ce="/ImgNotAvailable.jpg",ye=function(e){var t,a=Object(i.e)(),s=(null===(t=a.state)||void 0===t?void 0:t.docs)||[],n=Math.ceil(s.length/10),c=Object(r.useState)(1),l=Object(o.a)(c,2),u=l[0],b=l[1],p=Object(r.useContext)(d),h=Object(i.f)(),O=function(e){var t=e.currentTarget.getAttribute("itemid").split("/");t=t.pop(),h("/book/".concat(t),{state:t})};Object(r.useEffect)((function(){b(1),console.log(a)}),a.key);var v=Object(j.jsx)("div",{className:"BookResults-no-results",children:Object(j.jsx)("p",{children:"No results to display. Please try a different Search"})}),m=Object(j.jsx)("div",{className:"BookResults-wrapper",children:s.slice(10*(u-1),10*u).map((function(e){return Object(j.jsx)("div",{coverid:e.cover_i,itemID:e.key,className:"BookResults-result-card ".concat(p<800?"mobile":p<1e3?"tablet":""),children:Object(j.jsxs)(fe.a,{sx:{maxWidth:345},itemID:e.key,onClick:O,children:[Object(j.jsx)(Ne.a,{component:"img",alt:Ce,image:e.cover_i?"https://covers.openlibrary.org/b/id/"+e.cover_i+"-M.jpg":Ce}),Object(j.jsx)("div",{className:"BookResults-result-card-details-wrapper",children:Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(we.a,{gutterBottom:!0,variant:"h6",component:"div",title:e.title,children:e.title}),Object(j.jsxs)(we.a,{variant:"body2",color:"text.secondary",children:["Initial Published Year: ",e.first_publish_year]})]})})]})},e.key)}))});return Object(j.jsxs)("div",{className:"BookResults",children:[s?m:v,s?Object(j.jsx)("div",{className:"BookResults-pagination-wrapper",children:Object(j.jsx)(ce.a,{count:n,page:u,onChange:function(e,t){b(t)},variant:"outlined",color:"primary"})}):null]})},De=(a(231),a(344)),Se=(a(232),"/ImgNotAvailable.jpg"),Be=function(e){var t=e.id,a=e.limit||50,s=Object(r.useState)(null),n=Object(o.a)(s,2),c=n[0],l=n[1],d=Object(r.useContext)(V).raiseSnackbarMessage,u=Object(i.f)(),b=function(e){var t=e.currentTarget.getAttribute("bookid").split("/").pop();console.log("before nav",t),u("/book/".concat(t),{state:t})};Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()({method:"GET",url:"https://openlibrary.org"+t+"/works.json?limit="+a});case 2:if((r=e.sent)&&r.data&&200===r.status){e.next=6;break}return d("Unable to retrieve the works of Author","error"),e.abrupt("return");case 6:l(r.data.entries);case 7:case"end":return e.stop()}}),e)}))),[e.id]);var p=Object(j.jsx)("div",{className:"AuthorWorks-no-results",children:Object(j.jsx)("p",{children:"No Author works to display."})});return Object(j.jsx)("div",{className:"AuthorWorks",children:c?Object(j.jsx)(j.Fragment,{children:null===c||void 0===c?void 0:c.map((function(e){return Object(j.jsxs)("div",{className:"AuthorWorks-work-wrapper",children:[Object(j.jsx)("div",{className:"AuthorWorks-work-cover-wrapper",bookid:e.key,onClick:b,children:Object(j.jsx)("img",{alt:Se,src:e&&e.covers&&e.covers.length?"https://covers.openlibrary.org/b/id/"+e.covers[0]+"-M.jpg":Se})}),Object(j.jsx)("div",{className:"Authorworks-work-title-wrapper",title:e.title,children:Object(j.jsx)("p",{children:e.title})})]},e.key)}))}):p})},Ae=(a(233),a(340)),Re=a(356),Me=a(355),Te=a(332),Ee={WANT_TO_READ:"Want to Read",CURRENTLY_READING:"Currently Reading",READ:"Read",NONE:"None"},Ie=[Ee.CURRENTLY_READING,Ee.WANT_TO_READ,Ee.READ],Ue=Ee,Ye=a(105),Pe=(a(234),a(4)),_e=a(357),Fe=a(358),Le=a(155),We=a.n(Le),Ge=a(154),ze=a.n(Ge),He=a(341),Je=a(331),Ke=a(329),qe=a(330),Ve=Object(r.createContext)(null),Ze=["children","onClose"],Qe=(Object(Pe.a)(de.a)((function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}})),function(e){var t=e.children,a=e.onClose,r=Object(Ye.a)(e,Ze);return Object(j.jsxs)(je.a,Object(he.a)(Object(he.a)({sx:{m:0,p:2}},r),{},{children:[t,a?Object(j.jsx)(f.a,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(j.jsx)(We.a,{})}):null]}))}),Xe=function(e){return Object(j.jsx)(ze.a,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:Object(j.jsx)(F.a,Object(he.a)({},e))})},$e=function(e){var t=Object(r.useState)(null),a=Object(o.a)(t,2),s=a[0],n=a[1],c=Object(r.useState)(null),i=Object(o.a)(c,2),u=i[0],b=i[1],p=Object(r.useState)(null),v=Object(o.a)(p,2),m=v[0],x=v[1],g=Object(r.useContext)(l),f=g.user,k=g.setUser,w=Object(r.useContext)(V).raiseSnackbarMessage,N=Object(r.useRef)(!1),C=Object(r.useContext)(d),y=Object(r.useState)(""),D=Object(o.a)(y,2),S=D[0],B=D[1],A=Object(r.useRef)(e.reviewContent),R=Object(r.useContext)(Ve),M=R.setCurrentUserReview,T=R.bookId,E=function(){e.setDialogOpen(!1)};Object(r.useEffect)((function(){n(e.startDate||null),b(e.endDate||null),x(e.targetDate||null),B(e.reviewContent),console.log("In UseEffect",T,e.reviewContent)}),[e.startDate,e.endDate,e.setTargetDate,e.reviewContent,T]);var I=function(){var t=Object(O.a)(h.a.mark((function t(){var a,r,n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(),(n=null===f||void 0===f?void 0:f.token)||(w("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),k(null)),t.next=5,Q()({method:"PATCH",url:"http://localhost:4000"+"/api/book/".concat(T),headers:{Authorization:"Bearer ".concat(n)},data:{extras:{userName:null===(a=f.profile)||void 0===a?void 0:a.name,profilePicUrl:null===(r=f.profile)||void 0===r?void 0:r.profilePicUrl,rating:e.rating,startDate:s,endDate:u,targetDate:m,status:e.status,prevReview:A.current,reviewContent:S},cover:e.bookCover,name:e.bookName}});case 5:if(401===(c=t.sent).status&&(w(c.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),k(null)),200===c.status){t.next=10;break}return w(c.data.message,"error"),t.abrupt("return");case 10:A.current!==S&&M({reviewContent:S,reviewTimeStamp:Date.now()}),A.current=S;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"UserBookExtrasDialog",children:Object(j.jsxs)(de.a,{onClose:E,"aria-labelledby":"draggable-dialog-title",open:e.setOpen,PaperComponent:Xe,children:[Object(j.jsx)(Qe,{id:"customized-dialog-title",onClose:E,style:{cursor:"move"},children:Object(j.jsx)("p",{className:"UserBookExtrasDialog-title",children:e.bookName})}),Object(j.jsx)(_e.a,{dividers:!0,children:Object(j.jsxs)("div",{className:"UserBookExtrasDialog-content-wrapper",children:[Object(j.jsxs)("div",{className:"UserBookExtrasDialog-content-dates-wrapper ".concat(C<600?"mobile600":null),children:[e.status&&(e.status===Ue.CURRENTLY_READING||e.status===Ue.READ)&&Object(j.jsx)("div",{className:"UserBookExtrasDialog-start-date-wrapper",children:Object(j.jsx)(Ke.b,{dateAdapter:Je.a,children:Object(j.jsx)(qe.a,{label:"Start Date",value:s,onChange:function(t){if(e.status===Ue.READ&&u){var a=Date.parse(ne()(t).format("YYYY-MM-DD")+"T00:00:00"),r=Date.parse(ne()(u).format("YYYY-MM-DD")+"T00:00:00");console.log(a,r),N.current=a>r}else N.current=!1;n(t)},maxDate:new Date,renderInput:function(e){return Object(j.jsx)(He.a,Object(he.a)({},e))}})})}),e.status&&e.status===Ue.READ&&Object(j.jsx)("div",{className:"UserBookExtrasDialog-end-date-wrapper ".concat(!0===N.current?"error":null),children:Object(j.jsx)(Ke.b,{dateAdapter:Je.a,children:Object(j.jsx)(qe.a,{label:"End Date",value:u,onChange:function(t){if(e.status===Ue.READ&&s){var a=Date.parse(ne()(s).format("YYYY-MM-DD")+"T00:00:00"),r=Date.parse(ne()(t).format("YYYY-MM-DD")+"T00:00:00");console.log(a,r),N.current=a>r}else N.current=!1;b(t)},maxDate:new Date,renderInput:function(e){return Object(j.jsx)(He.a,Object(he.a)({},e))}})})}),e.status&&e.status===Ue.WANT_TO_READ&&Object(j.jsx)("div",{className:"UserBookExtrasDialog-end-date-wrapper",children:Object(j.jsx)(Ke.b,{dateAdapter:Je.a,children:Object(j.jsx)(qe.a,{label:"Target Date",value:m,onChange:function(e){x(e)},minDate:new Date,renderInput:function(e){return Object(j.jsx)(He.a,Object(he.a)({},e))}})})})]}),Object(j.jsxs)("div",{className:"UserBookExtrasDialog-review-wrapper",children:[Object(j.jsx)(He.a,{value:S,multiline:!0,inputProps:{maxLength:280},fullWidth:!0,label:"review",id:"fullWidth",onChange:function(e){B(e.target.value)}}),e.reviewTimeStamp&&Object(j.jsx)("div",{className:"UserBookExtrasDialog-timestamp-wrapper",children:Object(j.jsxs)("p",{children:["last updated: ",ne()(e.reviewTimeStamp).format("D MMM YYYY")]})})]})]})}),Object(j.jsx)(Fe.a,{children:Object(j.jsx)(ae.a,{autoFocus:!0,onClick:I,disabled:N.current,children:"Save changes"})})]})})},et=[Ue.NONE,Ue.WANT_TO_READ,Ue.CURRENTLY_READING,Ue.READ],tt=function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),s=a[0],n=a[1],c=Object(r.useContext)(l),i=c.user,d=c.setUser,u=Object(r.useContext)(V).raiseSnackbarMessage,b=Object(r.useRef)(0),p=Object(r.useState)(!1),v=Object(o.a)(p,2),m=v[0],x=v[1],g=function(){var t=Object(O.a)(h.a.mark((function t(a){var r,c,o,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s,c=a.target.value,n(c),e.updateStatus&&e.updateStatus(c),b.current+=1,(o=null===i||void 0===i?void 0:i.token)||(u("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),d(null)),t.next=9,Q()({method:"PATCH",url:"http://localhost:4000"+"/api/book/".concat(e.bookId),headers:{Authorization:"Bearer ".concat(o)},data:{status:{current:c,prev:r},cover:e.cover,name:e.name,startDate:e.startDate,endDate:e.endDate,targetDate:e.targetDate}});case 9:401===(l=t.sent).status&&(u(l.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),d(null));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(e.status?e.status:et[0])}),[e.status]),Object(j.jsxs)("div",{className:"UserBookStatus",children:[Object(j.jsxs)(Me.a,{variant:"standard",sx:{m:1,minWidth:120},children:[Object(j.jsx)(Ae.a,{id:"demo-simple-select-standard-label",children:"Status"}),Object(j.jsx)(Te.a,{labelId:"demo-simple-select-standard-label",inputProps:{MenuProps:{disableScrollLock:!0}},id:"demo-simple-select-standard",value:s,onChange:g,label:"Status",children:et.map((function(e,t){return Object(j.jsx)(Re.a,{value:e,children:e},t)}))})]}),Object(j.jsx)($e,{setOpen:m,setDialogOpen:x,bookName:e.name,status:s,bookId:e.bookId,bookCover:e.cover,startDate:e.startDate,endDate:e.endDate,targetDate:e.targetDate,rating:e.rating,reviewContent:e.reviewContent,reviewTimeStamp:e.reviewTimeStamp}),s!==Ue.NONE&&Object(j.jsx)("div",{className:"UserBookStatus-edit-details-wrapper",children:Object(j.jsx)("p",{onClick:function(){x(!0)},children:"Edit Dates & Submit Review"})})]})},at=(a(239),function(e){var t=Object(r.useState)(e.rating||0),a=Object(o.a)(t,2),s=a[0],n=a[1],c=Object(r.useContext)(l),i=c.user,d=c.setUser,u=Object(r.useContext)(V).raiseSnackbarMessage,b=function(){var t=Object(O.a)(h.a.mark((function t(a,r){var c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=null===i||void 0===i?void 0:i.token)||(u("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),d(null)),n(r),t.next=5,Q()({method:"PATCH",url:"http://localhost:4000"+"/api/book/".concat(e.bookId),headers:{Authorization:"Bearer ".concat(c)},data:{rating:{prev:s,current:r},cover:e.cover,name:e.name}});case 5:401===(o=t.sent).status?(u(o.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),d(null)):200!==o.status&&u(o.data.message,"error");case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n(e.rating?e.rating:0)}),[e.bookId,e.rating]),Object(j.jsxs)("div",{className:"UserBookRating",children:[Object(j.jsx)("div",{className:"UserBookRating-title-wrapper",children:Object(j.jsx)("p",{children:s>0?"My rating":"Rate this book"})}),Object(j.jsx)(oe.a,{name:"half-rating",value:s,precision:.5,onChange:b})]})}),rt=(a(240),function(e){var t=Object(r.useContext)(l).user,a=e.reviews,s=e.userId,n=e.userReview,c=Object(r.useContext)(d),i=Math.ceil((a&&a.length?a.length:0)/10),u=Object(r.useState)(1),b=Object(o.a)(u,2),p=b[0],h=b[1],O=t.profile.name,v=t.profile.profilePicUrl;return Object(j.jsxs)("div",{className:"BookReviews",children:[n&&n.reviewContent?Object(j.jsxs)("div",{className:"BookReviews-review",children:[Object(j.jsx)("div",{className:"BookReviews-review-image-wrapper",children:Object(j.jsx)("img",{src:v})}),Object(j.jsxs)("div",{className:"BookReviews-review-body-wrapper",children:[Object(j.jsxs)("div",{className:"BookReviews-review-header-wrapper ".concat(c<900?"mobile900":null),children:[Object(j.jsx)("p",{className:"BookReviews-review-user-name",children:O}),Object(j.jsx)("p",{className:"BookReviews-review-published-date",children:ne()(n.reviewTimeStamp).format("D MMM, YY")})]}),Object(j.jsx)("div",{className:"BookReviews-review-content-wrapper",children:Object(j.jsx)("span",{children:n.reviewContent})})]})]}):null,a&&a.length?a.slice(10*(p-1),10*p).filter((function(e){return e._id!==s})).map((function(e,t){return Object(j.jsxs)("div",{className:"BookReviews-review",children:[Object(j.jsx)("div",{className:"BookReviews-review-image-wrapper",children:Object(j.jsx)("img",{src:e.profilePicUrl})}),Object(j.jsxs)("div",{className:"BookReviews-review-body-wrapper",children:[Object(j.jsxs)("div",{className:"BookReviews-review-header-wrapper ".concat(c<900?"mobile900":null),children:[Object(j.jsx)("p",{className:"BookReviews-review-user-name",children:e.userName}),Object(j.jsx)("p",{className:"BookReviews-review-published-date",children:ne()(e.timeStamp).format("D MMM, YY")})]}),Object(j.jsx)("div",{className:"BookReviews-review-content-wrapper",children:Object(j.jsx)("span",{children:e.reviewContent})})]})]},t)})):null,a&&a.length?Object(j.jsx)("div",{className:"BookReviews-pagination-wrapper",children:Object(j.jsx)(ce.a,{count:i,page:p,onChange:function(e,t){h(t)},variant:"outlined",color:"primary"})}):null]})}),st=a(157),nt=a.n(st),ct="/ImgNotAvailable.jpg",ot=[{background:"linear-gradient(#7D141D, #FF1E27)",color:"#F4EFEA"},{backgroundColor:"#292826",color:"#F9D342"},{backgroundColor:"#FBEAEB",color:"#2F3C7E"},{background:"linear-gradient(#F6B042, #F9ED4E)",color:"#533549,"},{backgroundColor:"#AA96DA",color:"#FFFFD2"},{backgroundColor:"#080A52",color:"#EB2188"}],it=function(){var e,t=Object(i.e)(),a=Object(r.useState)(null),s=Object(o.a)(a,2),n=s[0],c=s[1],u=Object(r.useState)(null),b=Object(o.a)(u,2),p=b[0],v=b[1],m=Object(r.useState)(null),x=Object(o.a)(m,2),g=x[0],f=x[1],k=Object(r.useContext)(V).raiseSnackbarMessage,w=Object(r.useContext)(l),N=w.user,C=(w.setUser,Object(r.useContext)(d)),y=Object(i.f)(),D=t.pathname.split("/").pop(),S=Object(r.useState)(null),B=Object(o.a)(S,2),A=B[0],R=B[1],M=Object(r.useState)(null),T=Object(o.a)(M,2),E=T[0],I=T[1],U=Object(r.useState)(null),Y=Object(o.a)(U,2),P=Y[0],_=Y[1],F=Object(r.useState)(null),L=Object(o.a)(F,2),W=L[0],G=L[1],z=Object(r.useState)(0),H=Object(o.a)(z,2),J=H[0],K=H[1];W&&(W.wantToReadCount||W.readCount||W.currentlyReadingCount)&&(e={labels:[Ue.CURRENTLY_READING,Ue.WANT_TO_READ,Ue.READ],datasets:[{data:[W.currentlyReadingCount,W.wantToReadCount,W.readCount],backgroundColor:["#292826","rgb(255, 99, 132)","#AA96DA","rgb(255, 205, 86)","rgb(54, 162, 235)"]}]}),Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Book component Re-render ",D),Q()({method:"GET",url:"https://openlibrary.org/works/"+t.pathname.split("/").pop()+".json"}).then((function(e){if(200!==e.status)k("Unable to retrieve the Book info. Please try again","error");else{c(e.data);var t=e.data.authors&&e.data.authors.length?e.data.authors[0].author.key:null;if(null===t)return;Q()({method:"GET",url:"https://openlibrary.org"+t+".json"}).then((function(e){v(e.data)}))}})),a=null===N||void 0===N?void 0:N.token,Q()({method:"GET",url:"http://localhost:4000/api/book/"+t.pathname.split("/").pop(),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){500===e.status?k(e.data.message,"error"):(f(e.data),_({reviewContent:e.data.reviewContent,reviewTimeStamp:e.data.reviewTimeStamp}),R(e.data.status))})),Q()({method:"GET",url:"http://localhost:4000/api/bookReviews/"+t.pathname.split("/").pop(),headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){200!==e.status?k(e.data.message,"error"):I(e.data)})),e.next=7,Q()({method:"GET",url:"http://localhost:4000/api/book/"+t.pathname.split("/").pop()+"/stats",headers:{Authorization:"Bearer ".concat(a)}});case 7:(r=e.sent)&&r.data&&200===r.status?(G(r.data),K(100*r.data.averageRating/5)):k(r.data.message,"error");case 9:case"end":return e.stop()}}),e)}))),[D]);var q=Object(j.jsx)("div",{className:"BookResults-no-results",children:Object(j.jsx)("p",{children:"No results to display. Please try a different Search"})});return Object(j.jsx)("div",{className:"Book ".concat(C<1200?"mobile1200":""),children:n&&n.title?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"Book-header",children:[Object(j.jsx)("div",{className:"Book-Thumbnail-section-wrapper",children:Object(j.jsx)("div",{className:"Book-Thumbail-wrapper",children:Object(j.jsx)("img",{src:n&&n.covers&&n.covers.length?"https://covers.openlibrary.org/b/id/"+(null===n||void 0===n?void 0:n.covers[0])+"-M.jpg":ct,alt:ct})})}),Object(j.jsxs)("div",{className:"Book-details-section-wrapper ".concat(C<=900?"mobile":""),children:[Object(j.jsx)("div",{className:"Book-details-title-wrapper",title:null===n||void 0===n?void 0:n.title,children:Object(j.jsx)("p",{children:null===n||void 0===n?void 0:n.title})}),p&&p.name&&Object(j.jsxs)("div",{className:"Book-details-author-wrapper",title:null===p||void 0===p?void 0:p.name,children:["by ",Object(j.jsxs)("p",{authorid:null===p||void 0===p?void 0:p.key,onClick:function(e){var t=e.currentTarget.getAttribute("authorid").split("/").pop();y("/author/".concat(t),{state:t})},children:[" ",null===p||void 0===p?void 0:p.name," "]})]}),Object(j.jsx)("div",{className:"Book-details-description-wrapper",title:n&&n.description?n.description.value:"",children:Object(j.jsx)("p",{children:n&&n.description?n.description.value:""})})]})]}),Object(j.jsxs)("div",{className:"Book-current-user-utils-wrapper ".concat(A),children:[Object(j.jsx)("div",{className:"Book-current-user-status-wrapper",children:Object(j.jsx)(Ve.Provider,{value:{setCurrentUserReview:_,bookId:t.pathname.split("/").pop()},children:Object(j.jsx)(tt,{bookId:t.pathname.split("/").pop(),cover:n&&n.covers&&n.covers.length?n.covers[0]:ct,name:null===n||void 0===n?void 0:n.title,status:A,rating:null===g||void 0===g?void 0:g.rating,startDate:null===g||void 0===g?void 0:g.startDate,endDate:null===g||void 0===g?void 0:g.endDate,targetDate:null===g||void 0===g?void 0:g.targetDate,updateStatus:R,reviewContent:null===g||void 0===g?void 0:g.reviewContent,reviewTimeStamp:null===g||void 0===g?void 0:g.reviewTimeStamp})})}),Object(j.jsx)("div",{className:"Book-current-user-rating-wrapper",children:Object(j.jsx)(at,{bookId:t.pathname.split("/").pop(),cover:n&&n.covers&&n.covers.length?n.covers[0]:ct,name:null===n||void 0===n?void 0:n.title,status:null===g||void 0===g?void 0:g.status,rating:null===g||void 0===g?void 0:g.rating})}),Object(j.jsxs)("div",{className:"Book-stats-wrapper",children:[W&&W.averageRating?Object(j.jsxs)("div",{className:"Book-stats-rating-wrapper",children:[Object(j.jsx)(nt.a,{progress:J.toFixed(2),radius:100,className:"".concat(J>75?"green":J>50?"orange":"red"),children:Object(j.jsxs)("span",{className:"Book-stats-rating-content",children:[W.averageRating," / ",5]})}),Object(j.jsxs)("span",{children:[W.ratingCount," ",W.ratingCount>1?"ratings":"rating"]})]}):null,e?Object(j.jsx)("div",{className:"Book-stats-chart-wrapper",children:Object(j.jsx)("div",{className:"Book-stats-chart",children:Object(j.jsx)(le.b,{responsive:!0,data:e,height:200,width:200,options:{plugins:{legend:{display:!1}}}})})}):null]})]}),n&&(n.subject_people||n.subject_places)&&Object(j.jsxs)("div",{className:"Book-extras",children:[Object(j.jsx)("div",{className:"Book-characters-wrapper ".concat(C<=850?"mobile":""),children:n&&n.subject_people&&n.subject_people.filter((function(e,t){return t<10})).map((function(e,t){return Object(j.jsx)(De.a,{label:e,title:e,style:ot[t%ot.length]},e)}))}),Object(j.jsx)("div",{className:"Book-places-wrapper ".concat(C<=850?"mobile":""),children:n&&n.subject_places&&n.subject_places.filter((function(e,t){return t<10})).map((function(e,t){return Object(j.jsx)(De.a,{label:e,title:e,style:ot[ot.length-1-t%ot.length],color:"primary"},e)}))})]}),p&&p.name?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"Book-author-works-title-wrapper",children:Object(j.jsxs)("p",{children:[" Works by ",p.name," "]})}),Object(j.jsx)("div",{className:"Book-author-works-wrapper",children:Object(j.jsx)(Be,{id:null===p||void 0===p?void 0:p.key,limit:20})})]}):null,E&&E.reviews&&E.reviews.length||P&&P.reviewContent?Object(j.jsxs)("div",{className:"Book-reviews-wrapper",children:[Object(j.jsx)("div",{className:"Book-reviews-title-wrapper",children:Object(j.jsx)("p",{children:"Community Reviews"})}),Object(j.jsx)(rt,{bookId:t.pathname.split("/").pop(),reviews:null===E||void 0===E?void 0:E.reviews,userReview:P,userId:null===E||void 0===E?void 0:E.userId})]}):null,Object(j.jsx)("div",{className:"Book-footer"})]}):q})},lt=a(3),dt=(a(247),"/ImgNotAvailable.jpg"),jt=function(e){var t=Object(i.e)();console.log(t);var a=t.pathname.split("/").pop();console.log(a);var s=Object(r.useState)(null),n=Object(o.a)(s,2),c=n[0],l=n[1],u=Object(r.useContext)(V).raiseSnackbarMessage,b=Object(r.useContext)(d);Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q()({method:"GET",url:"https://openlibrary.org/authors/"+a+".json"});case 2:if((t=e.sent)&&t.data&&200===t.status){e.next=6;break}return u("Unable to retrieve the Author info. Please try again.","error"),e.abrupt("return");case 6:console.log(t.data),l(t.data);case 8:case"end":return e.stop()}}),e)}))),[]);var p=Object(j.jsx)("div",{className:"BookResults-no-results",children:Object(j.jsx)("p",{children:"Nothing to display."})});return Object(j.jsx)("div",{className:"Author ".concat(b<1200?"mobile1200":""),children:c?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"Author-header",children:[Object(j.jsx)("div",{className:"Author-pic-wrapper",children:Object(j.jsx)("img",Object(lt.a)({src:dt},"src",c&&c.photos&&c.photos.length?"https://covers.openlibrary.org/a/id/"+c.photos[0]+"-L.jpg":dt))}),Object(j.jsxs)("div",{className:"Author-details-wrapper",children:[Object(j.jsx)("div",{className:"Author-details-name-wrapper",children:Object(j.jsx)("p",{children:null===c||void 0===c?void 0:c.name})}),c&&c.birth_date&&Object(j.jsxs)("div",{className:"Author-details-birth-date-wrapper",children:[Object(j.jsx)("span",{children:"Birth Date: "}),Object(j.jsx)("span",{className:"Author-details-birth-date",children:null===c||void 0===c?void 0:c.birth_date})]}),Object(j.jsx)("div",{className:"Author-details-bio-wrapper",children:Object(j.jsx)("p",{children:null===c||void 0===c?void 0:c.bio})}),Object(j.jsxs)("div",{className:"Author-details-links-wrapper",children:[c&&c.links&&c.links.length&&c.links.filter((function(e,t){return t<1})).map((function(e,t){return Object(j.jsx)("div",{className:"Author-details-link",children:Object(j.jsx)("a",{href:e.url,target:"_blank",children:"Website"})},t)})),Object(j.jsx)("div",{className:"Author-details-link",children:c&&c.wikipedia&&Object(j.jsx)("a",{href:c.wikipedia,target:"_blank",children:"Wiki"})})]})]})]}),Object(j.jsxs)("div",{className:"Author-author-works-wrapper",children:[Object(j.jsx)("div",{className:"Author-author-works-title-wrapper",children:Object(j.jsx)("p",{children:" Works By the Author "})}),Object(j.jsx)(Be,{id:null===c||void 0===c?void 0:c.key,limit:30})]}),Object(j.jsx)("div",{className:"Author-footer"})]}):p})},ut=(a(248),a(249),a(70)),bt=a.n(ut),pt="/ImgNotAvailable.jpg",ht=function(e){var t=e.books,a=Object(i.f)(),r=function(e){var t=e.currentTarget.getAttribute("bookid");a("/book/".concat(t),{state:t})};return Object(j.jsx)("div",{className:"BooksTile",children:t&&t.filter((function(e,t){return t<10})).map((function(t,a){return Object(j.jsxs)("div",{className:"BooksTile-book-wrapper",children:[Object(j.jsx)("div",{className:"BooksTile-cover-wrapper",onClick:r,bookid:t._id,children:Object(j.jsx)("img",{src:t.cover?"https://covers.openlibrary.org/b/id/"+t.cover+"-M.jpg":pt,alt:pt,title:t.name})}),Object(j.jsxs)("div",{className:"BooksTile-name-wrapper",children:[e.displayRating&&t&&t.rating?Object(j.jsx)(oe.a,{value:t.rating,precision:.5,readOnly:!0}):null,e.displayStarted&&t&&t.startDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-started",children:["Started: ",Object(j.jsx)(bt.a,{date:t.startDate,format:"D MMM YYYY"})]}):null,e.displayCompleted&&t&&t.endDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-completed",children:["Completed: ",Object(j.jsx)(bt.a,{date:t.endDate,format:"D MMM YYYY"})]}):null,e.displayTarget&&t&&t.targetDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-target",children:["Target: ",Object(j.jsx)(bt.a,{date:t.targetDate,format:"D MMM YYYY"})]}):null]})]},t._id+" "+a)}))})},Ot=function(){var e=Object(r.useContext)(l),t=e.user,a=e.setUser,s=(Object(r.useRef)(window.innerWidth),Object(r.useContext)(V).raiseSnackbarMessage),n=Object(r.useState)(null),c=Object(o.a)(n,2),d=c[0],u=c[1],b=Object(i.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=null===t||void 0===t?void 0:t.token)||(s("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),e.next=4,Q()({method:"GET",url:"http://localhost:4000/api/mybooks",headers:{Authorization:"Bearer ".concat(r)}});case 4:if(401===(n=e.sent).status&&(s(n.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),a(null)),200===n.status){e.next=9;break}return s(n.data.message,"error"),e.abrupt("return");case 9:u(n.data);case 10:case"end":return e.stop()}}),e)}))),[]);var p=function(e){var t=e.currentTarget.getAttribute("type").trim();t=encodeURI(t),b("".concat(t),{state:d[t]})};return Object(j.jsxs)("div",{className:"MyBooks",children:[d&&Object(j.jsxs)(j.Fragment,{children:[Ie&&Ie.length&&Ie.map((function(e,t){return d&&d[e]&&d[e].length?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"MyBooks-title-wrapper",children:[Object(j.jsx)("span",{className:"MyBooks-title",children:e}),d[e]&&d[e].length>10?Object(j.jsx)("span",{className:"Mybooks-show-more",type:e,onClick:p,children:"Show more"}):null]}),Object(j.jsx)("div",{className:"MyBooks-type-section-wrapper ".concat(e),children:Object(j.jsx)(ht,{books:d[e],displayStarted:e===Ue.CURRENTLY_READING,displayCompleted:e===Ue.READ,displayTarget:e===Ue.WANT_TO_READ})})]},e+" "+t):null})),d&&d.rated&&d.rated.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"MyBooks-title-wrapper",children:[Object(j.jsx)("span",{className:"MyBooks-title",children:"Rated"}),d.rated&&d.rated.length>10?Object(j.jsx)("span",{className:"Mybooks-show-more",type:"rated",onClick:p,children:"Show more"}):null]}),Object(j.jsx)("div",{className:"MyBooks-type-section-wrapper rated",children:Object(j.jsx)(ht,{books:d.rated,displayRating:!0})})]}):null]}),Object(j.jsx)("div",{className:"MyBooks-recommended-wrapper"})]})},vt=(a(250),"/ImgNotAvailable.jpg"),mt=function(e){var t,a=Object(i.e)();console.log(a);var s=null===(t=decodeURI(a.pathname).split("/"))||void 0===t?void 0:t.pop(),n=Object(r.useContext)(l),c=n.user,u=n.setUser,b=Object(r.useState)([]),p=Object(o.a)(b,2),v=p[0],m=p[1],x=Object(r.useContext)(V).raiseSnackbarMessage,g=!1,f=Math.ceil((v&&v.length?v.length:0)/10),k=Object(r.useState)(1),w=Object(o.a)(k,2),N=w[0],C=w[1],y=Object(r.useContext)(d),D=Object(i.f)();if("rated"===s)g=!0;else for(var S in Ue)if(Ue[S]===s){g=!0;break}var B=function(e){var t=e.currentTarget.getAttribute("itemid");D("/book/".concat(t),{state:t})};Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=null===c||void 0===c?void 0:c.token)||(x("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),u(null)),g){e.next=5;break}return x("No results to display.","info"),e.abrupt("return");case 5:return e.next=7,Q()({method:"GET",url:"http://localhost:4000/api/mybooks/"+s,headers:{Authorization:"Bearer ".concat(t)}});case 7:if(401===(a=e.sent).status&&(x(a.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),u(null)),200===a.status){e.next=12;break}return x(a.data.message,"error"),e.abrupt("return");case 12:console.log(a.data[s]),m(a.data[s]);case 14:case"end":return e.stop()}}),e)}))),[]);var A=Object(j.jsx)("div",{className:"BookResults-no-results",children:Object(j.jsx)("p",{children:"No results to display."})});return Object(j.jsxs)("div",{className:"MyBooksDetails",children:[g?Object(j.jsx)("div",{className:"MyBooksDetails-results-wrapper",children:v&&v.length&&v.slice(10*(N-1),10*N).map((function(e){return Object(j.jsx)("div",{coverid:e.cover,itemID:e._id,className:"MyBooksDetails-result-card ".concat(y<800?"mobile":y<1e3?"tablet":""),children:Object(j.jsxs)(fe.a,{sx:{maxWidth:345},itemID:e._id,onClick:B,children:[Object(j.jsx)(Ne.a,{component:"img",alt:vt,image:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":vt}),Object(j.jsxs)("div",{className:"MyBooksDetails-result-card-details-wrapper",title:null===e||void 0===e?void 0:e.name,children:[Object(j.jsx)("p",{children:null===e||void 0===e?void 0:e.name}),"rated"===s&&e&&e.rating?Object(j.jsx)(oe.a,{value:e.rating,precision:.5,readOnly:!0}):null,s===Ue.CURRENTLY_READING&&e&&e.startDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-started",children:["Started: ",Object(j.jsx)(bt.a,{date:e.startDate,format:"D MMM YYYY"})]}):null,s===Ue.READ&&e&&e.endDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-completed",children:["Completed: ",Object(j.jsx)(bt.a,{date:e.endDate,format:"D MMM YYYY"})]}):null,s===Ue.WANT_TO_READ&&e&&e.targetDate?Object(j.jsxs)("span",{className:"BooksTile-name-wrapper-target",children:["Target: ",Object(j.jsx)(bt.a,{date:e.endDate,format:"D MMM YYYY"})]}):null]})]})},e._id)}))}):A,g?Object(j.jsx)("div",{className:"MyBooksDetails-pagination-wrapper",children:Object(j.jsx)(ce.a,{count:f,page:N,onChange:function(e,t){C(t)},variant:"outlined",color:"primary"})}):null]})},xt=(a(251),function(e){var t=Object(r.useContext)(l),a=t.user,s=t.setUser,n=Object(i.e)().state,c=Object(r.useState)(null),u=Object(o.a)(c,2),b=u[0],p=u[1],v=Object(r.useContext)(d),m=Object(r.useContext)(V).raiseSnackbarMessage,x=Math.ceil((b&&b.length?b.length:0)/10),g=Object(r.useState)(1),f=Object(o.a)(g,2),k=f[0],w=f[1],N=Object(i.f)();Object(r.useEffect)(Object(O.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=null===a||void 0===a?void 0:a.token)||(m("Unable to Authenticate the User. Please login again","error"),localStorage.setItem("betterreadsuserinfo",null),s(null)),!n||!n.reviews){e.next=6;break}p(n.reviews),e.next=14;break;case 6:return e.next=8,Q()({method:"GET",url:"http://localhost:4000/api/userActivity/userReviews",headers:{Authorization:"Bearer ".concat(t)}});case 8:if(401===(r=e.sent).status&&(m(r.data.message,"error"),localStorage.setItem("betterreadsuserinfo",null),s(null)),200===r.status){e.next=13;break}return m(r.data.message,"error"),e.abrupt("return");case 13:p(r.data.reviews);case 14:case"end":return e.stop()}}),e)}))),[]);var C=function(e){var t=e.currentTarget.getAttribute("bookid");N("/book/".concat(t),{state:t})};return Object(j.jsxs)("div",{className:"MyReviews ".concat(v<1200?"mobile1200":null),children:[b&&b.length?b.slice(10*(k-1),10*k).map((function(e,t){return Object(j.jsxs)("div",{className:"MyReviews-row",children:[Object(j.jsx)("div",{className:"MyReviews-row-cover-wrapper",children:Object(j.jsx)("img",{src:e.cover?"https://covers.openlibrary.org/b/id/"+e.cover+"-M.jpg":"/ImgNotAvailable.jpg",onClick:C,bookid:e._id})}),Object(j.jsxs)("div",{className:"MyReviews-row-details-wrapper",children:[Object(j.jsx)("div",{className:"MyReviews-row-title-wrapper",children:Object(j.jsx)("p",{children:e.name})}),Object(j.jsx)("div",{className:"MyReviews-row-review-wrapper",children:Object(j.jsx)("p",{children:e.reviewContent})})]})]},t)})):null,b&&b.length?Object(j.jsx)("div",{className:"MyReviews-pagination-wrapper",children:Object(j.jsx)(ce.a,{count:x,page:k,onChange:function(e,t){w(t)},variant:"outlined",color:"primary"})}):null]})}),gt=(a(252),function(){var e=Object(r.useContext)(d);return Object(j.jsx)("div",{className:"Friends Home",children:Object(j.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(j.jsx)("p",{children:"F.R.I.E.N.D.S feature development is in progress. Keep an eye out"}),Object(j.jsx)(u,{targetDate:"Dec 22, 2021 00:00:00"})]})})}),ft=(a(253),function(){var e=Object(r.useContext)(d);return Object(j.jsx)("div",{className:"Communities Home",children:Object(j.jsxs)("div",{className:"Home-count-down-wrapper ".concat(e<1200?"mobile1200":null),children:[Object(j.jsx)("p",{children:"Communities feature development is in progress. Keep an eye out"}),Object(j.jsx)(u,{targetDate:"Dec 22, 2021 00:00:00"})]})})}),kt=(a(254),function(){return Object(j.jsx)("div",{className:"NotFound",children:Object(j.jsx)("p",{children:"The page you're looking for does not exist."})})});var wt=function(){var e=JSON.parse(localStorage.getItem("betterreadsuserinfo")),t=Object(r.useState)(e),a=Object(o.a)(t,2),s=a[0],n=a[1],c=Object(r.useState)(window.innerWidth),u=Object(o.a)(c,2),p=u[0],h=u[1],O=Object(r.useState)(!1),v=Object(o.a)(O,2),m=v[0],x=v[1],g=Object(r.useRef)(null);Object(r.useEffect)((function(){window.addEventListener("resize",(function(){h(window.innerWidth)}))}),[]);var f=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)($,{}),Object(j.jsx)("div",{className:"App-body-wrapper ".concat(p<600?"mobile":""),children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/",element:Object(j.jsx)(b,{})}),Object(j.jsx)(i.a,{path:"/profile",element:Object(j.jsx)(pe,{})}),Object(j.jsx)(i.a,{path:"/bookresults",element:Object(j.jsx)(ye,{})}),Object(j.jsx)(i.a,{path:"/book/:bookId",element:Object(j.jsx)(it,{})}),Object(j.jsx)(i.a,{path:"/author/:authorId",element:Object(j.jsx)(jt,{})}),Object(j.jsx)(i.a,{path:"/mybooks",element:Object(j.jsx)(Ot,{})}),Object(j.jsx)(i.a,{path:"/mybooks/:status",element:Object(j.jsx)(mt,{})}),Object(j.jsx)(i.a,{path:"/myReviews",element:Object(j.jsx)(xt,{})}),Object(j.jsx)(i.a,{path:"/friends",element:Object(j.jsx)(gt,{})}),Object(j.jsx)(i.a,{path:"/communities",element:Object(j.jsx)(ft,{})}),Object(j.jsx)(i.a,{path:"*",element:Object(j.jsx)(kt,{})})]})})]});return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(l.Provider,{value:{user:s,setUser:n},children:Object(j.jsxs)(V.Provider,{value:{snackbarOpen:m,toggleSnackbar:x,snackbarObj:g,raiseSnackbarMessage:function(e,t){g.current={},g.current.severity=t,g.current.message=e,x(!0)}},children:[Object(j.jsx)(d.Provider,{value:p,children:s?f:Object(j.jsx)(te,{})}),Object(j.jsx)(ge,{})]})})})},Nt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,362)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))};c.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(_.a,{children:Object(j.jsx)(wt,{})})}),document.getElementById("root")),Nt()}},[[255,1,2]]]);
//# sourceMappingURL=main.1393ed38.chunk.js.map